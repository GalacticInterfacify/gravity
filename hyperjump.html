<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Proxy</title>
    <link rel="icon" href="files/ok.png" type="image/png">
    <style>
        /* Your existing CSS styles here */

        /* Additional style for iframe */
        #fullscreen-iframe {
            display: none;
            position: fixed;
            top: 50px;
            left: 0;
            width: 100vw;
            height: calc(100vh - 50px);
            z-index: 9999;
            border: none;
        }
    </style>
</head>

<body>

    <!-- Top bar for browser-like navigation -->
    <div id="top-bar">
        <button class="top-button" onclick="goBack()">&#9664;</button>
        <button class="top-button" onclick="goForward()">&#9654;</button>
        <button class="top-button" onclick="reloadIframe()">↻</button>
        <button class="top-button" onclick="reloadPage()">🏠</button>
        <button class="top-button" onclick="openInBlank()">⇗</button>
    </div>

    <div class="container">
        <h1>H̷̢̱̳̩͒Y̵͍͓͎̿͆P̵̦͘Ȩ̴͔͚͈̅R̵̡̮̰͒̃͜͝͠J̵̱̊̄U̶̩̔͆M̸̟̈̉̋P̷̧̙̥͓̊ </h1>
        <h5>created by and for GRAVITY</h5>
        <input type="text" class="textbox" placeholder="URL or search Google" id="input">
        <button class="button" onclick="launch()">LAUNCH</button>

        <hr> <!-- Horizontal line -->

        <div class="settings">


        </div>
    </div>

    <!-- iframe for loading external content -->
    <iframe id="fullscreen-iframe"></iframe>

    <script>
        // Function to encode URL using the provided encode() method
        function encode(str) {
            if (!str) return str;
            return encodeURIComponent(
                str
                    .toString()
                    .split('')
                    .map((char, ind) =>
                        ind % 2 ? String.fromCharCode(char.charCodeAt() ^ 2) : char
                    )
                    .join('')
            );
        }

        // Function to launch the iframe with the encoded URL
        function launch() {
            var input = document.getElementById("input").value.trim();
            var url;

            if (input.startsWith('http://') || input.startsWith('https://')) {
                url = input;
            } else {
                url = 'https://' + input;
            }

            var encodedUrl = encode(url);

            var iframe = document.getElementById('fullscreen-iframe');
            if (!iframe) {
                iframe = document.createElement('iframe');
                iframe.id = 'fullscreen-iframe';
                iframe.style.display = 'none';
                iframe.style.position = 'fixed';
                iframe.style.top = '50px';
                iframe.style.left = '0';
                iframe.style.width = '100vw';
                iframe.style.height = 'calc(100vh - 50px)';
                iframe.style.zIndex = '9999';
                iframe.style.border = 'none';

                document.body.appendChild(iframe);
            }

            // Set the source of the iframe to the encoded URL
            iframe.src = window.location.protocol + "//" + window.location.hostname + "/service/" + encodedUrl;

            // Make the iframe visible
            iframe.style.display = 'block';
        }

        // Your existing JavaScript functions (goBack(), goForward(), reloadIframe(), reloadPage(), openInBlank()) here...
    </script>

</body>

</html>

try{class EventData{eventName;listenerId;data;pingData;constructor(eventName,listenerId,data,pingData){this.eventName=eventName,this.listenerId=listenerId,this.data=data,this.pingData=pingData}}class PingData{gppVersion;cmpStatus;cmpDisplayStatus;signalStatus;supportedAPIs;cmpId;sectionList;applicableSections;gppString;parsedSections;constructor(cmpApiContext){this.gppVersion=cmpApiContext.gppVersion,this.cmpStatus=cmpApiContext.cmpStatus,this.cmpDisplayStatus=cmpApiContext.cmpDisplayStatus,this.signalStatus=cmpApiContext.signalStatus,this.supportedAPIs=cmpApiContext.supportedAPIs,this.cmpId=cmpApiContext.cmpId,this.sectionList=cmpApiContext.gppModel.getSectionIds(),this.applicableSections=cmpApiContext.applicableSections,this.gppString=cmpApiContext.gppModel.encode(),this.parsedSections=cmpApiContext.gppModel.toObject()}}class Command{callback;parameter;success=!0;cmpApiContext;constructor(cmpApiContext,callback,parameter){this.cmpApiContext=cmpApiContext,Object.assign(this,{callback,parameter})}execute(){try{return this.respond()}catch(error){return this.invokeCallback(null),null}}invokeCallback(response){const success=response!==null;if(this.callback)this.callback(response,success)}}class AddEventListenerCommand extends Command{respond(){let listenerId=this.cmpApiContext.eventQueue.add({callback:this.callback,parameter:this.parameter}),eventData=new EventData("listenerRegistered",listenerId,!0,new PingData(this.cmpApiContext));this.invokeCallback(eventData)}}class PingCommand extends Command{respond(){let pingReturn=new PingData(this.cmpApiContext);this.invokeCallback(pingReturn)}}class GetFieldCommand extends Command{respond(){if(!this.parameter||this.parameter.length===0)throw new Error("<section>.<field> parameter required");let parts=this.parameter.split(".");if(parts.length!=2)throw new Error("Field name must be in the format <section>.<fieldName>");let sectionName=parts[0],fieldName=parts[1],fieldValue=this.cmpApiContext.gppModel.getFieldValue(sectionName,fieldName);this.invokeCallback(fieldValue)}}class GetSectionCommand extends Command{respond(){if(!this.parameter||this.parameter.length===0)throw new Error("<section> parameter required");let section=null;if(this.cmpApiContext.gppModel.hasSection(this.parameter))section=this.cmpApiContext.gppModel.getSection(this.parameter);this.invokeCallback(section)}}class HasSectionCommand extends Command{respond(){if(!this.parameter||this.parameter.length===0)throw new Error("<section>[.version] parameter required");let hasSection=this.cmpApiContext.gppModel.hasSection(this.parameter);this.invokeCallback(hasSection)}}var GppCommand;(function(GppCommand2){GppCommand2.ADD_EVENT_LISTENER="addEventListener",GppCommand2.GET_FIELD="getField",GppCommand2.GET_SECTION="getSection",GppCommand2.HAS_SECTION="hasSection",GppCommand2.PING="ping",GppCommand2.REMOVE_EVENT_LISTENER="removeEventListener"})(GppCommand||(GppCommand={}));class RemoveEventListenerCommand extends Command{respond(){let listenerId=this.parameter,removed=this.cmpApiContext.eventQueue.remove(listenerId),eventData=new EventData("listenerRemoved",listenerId,removed,new PingData(this.cmpApiContext));this.invokeCallback(eventData)}}class CommandMap{static[GppCommand.ADD_EVENT_LISTENER]=AddEventListenerCommand;static[GppCommand.GET_FIELD]=GetFieldCommand;static[GppCommand.GET_SECTION]=GetSectionCommand;static[GppCommand.HAS_SECTION]=HasSectionCommand;static[GppCommand.PING]=PingCommand;static[GppCommand.REMOVE_EVENT_LISTENER]=RemoveEventListenerCommand}var CmpStatus;(function(CmpStatus2){CmpStatus2.STUB="stub",CmpStatus2.LOADING="loading",CmpStatus2.LOADED="loaded",CmpStatus2.ERROR="error"})(CmpStatus||(CmpStatus={}));var CmpDisplayStatus;(function(CmpDisplayStatus2){CmpDisplayStatus2.VISIBLE="visible",CmpDisplayStatus2.HIDDEN="hidden",CmpDisplayStatus2.DISABLED="disabled"})(CmpDisplayStatus||(CmpDisplayStatus={}));var EventStatus;(function(EventStatus2){EventStatus2.GPP_LOADED="gpploaded",EventStatus2.CMP_UI_SHOWN="cmpuishown",EventStatus2.USER_ACTION_COMPLETE="useractioncomplete"})(EventStatus||(EventStatus={}));var SignalStatus;(function(SignalStatus2){SignalStatus2.NOT_READY="not ready",SignalStatus2.READY="ready"})(SignalStatus||(SignalStatus={}));class CallResponder{callQueue;customCommands;cmpApiContext;constructor(cmpApiContext,customCommands){if(this.cmpApiContext=cmpApiContext,customCommands){let command=GppCommand.ADD_EVENT_LISTENER;if(customCommands?.[command])throw new Error(`Built-In Custom Commmand for ${command} not allowed`);if(command=GppCommand.REMOVE_EVENT_LISTENER,customCommands?.[command])throw new Error(`Built-In Custom Commmand for ${command} not allowed`);this.customCommands=customCommands}try{this.callQueue=window.__gpp()||[]}catch(err){this.callQueue=[]}finally{window.__gpp=this.apiCall.bind(this),this.purgeQueuedCalls()}}apiCall(command,callback,parameter,version){if(typeof command!=="string")callback(null,!1);else if(callback&&typeof callback!=="function")throw new Error("invalid callback function");else if(this.isCustomCommand(command))this.customCommands[command](callback,parameter);else if(this.isBuiltInCommand(command))new CommandMap[command](this.cmpApiContext,callback,parameter).execute();else if(callback)callback(null,!1)}purgeQueuedCalls(){const queueCopy=this.callQueue;this.callQueue=[],queueCopy.forEach((args)=>{window.__gpp(...args)})}isCustomCommand(command){return this.customCommands&&typeof this.customCommands[command]==="function"}isBuiltInCommand(command){return CommandMap[command]!==void 0}}class EventListenerQueue{eventQueue=new Map;queueNumber=1000;cmpApiContext;constructor(cmpApiContext){this.cmpApiContext=cmpApiContext;try{let events=window.__gpp("events")||[];for(var i=0;i<events.length;i++){let eventItem=events[i];this.eventQueue.set(eventItem.id,{callback:eventItem.callback,parameter:eventItem.parameter})}}catch(err){console.log(err)}}add(eventItem){return this.eventQueue.set(this.queueNumber,eventItem),this.queueNumber++}get(listenerId){return this.eventQueue.get(listenerId)}remove(listenerId){return this.eventQueue.delete(listenerId)}exec(eventName,data){this.eventQueue.forEach((eventItem,listenerId)=>{let eventData=new EventData(eventName,listenerId,data,new PingData(this.cmpApiContext)),success=!0;eventItem.callback(eventData,success)})}clear(){this.queueNumber=1000,this.eventQueue.clear()}get size(){return this.eventQueue.size}}class DecodingError extends Error{constructor(msg){super(msg);this.name="DecodingError"}}class FixedIntegerEncoder{static encode(value,bitStringLength){let bin=[];if(value>=1){bin.push(1);while(value>=bin[0]*2)bin.unshift(bin[0]*2)}let bitString="";for(let i=0;i<bin.length;i++){let b=bin[i];if(value>=b)bitString+="1",value-=b;else bitString+="0"}while(bitString.length<bitStringLength)bitString="0"+bitString;return bitString}static decode(bitString){if(!/^[0-1]*$/.test(bitString))throw new DecodingError("Undecodable FixedInteger '"+bitString+"'");let value=0,bin=[];for(let i=0;i<bitString.length;i++)if(i===0)bin[bitString.length-(i+1)]=1;else bin[bitString.length-(i+1)]=bin[bitString.length-i]*2;for(let i=0;i<bitString.length;i++)if(bitString.charAt(i)==="1")value+=bin[i];return value}}class EncodingError extends Error{constructor(msg){super(msg);this.name="EncodingError"}}class AbstractBase64UrlEncoder{static DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]);encode(bitString){if(!/^[0-1]*$/.test(bitString))throw new EncodingError("Unencodable Base64Url '"+bitString+"'");bitString=this.pad(bitString);let str="",index=0;while(index<=bitString.length-6){let s=bitString.substring(index,index+6);try{let n=FixedIntegerEncoder.decode(s),c=AbstractBase64UrlEncoder.DICT.charAt(n);str+=c,index+=6}catch(e){throw new EncodingError("Unencodable Base64Url '"+bitString+"'")}}return str}decode(str){if(!/^[A-Za-z0-9\-_]*$/.test(str))throw new DecodingError("Undecodable Base64URL string");let bitString="";for(let i=0;i<str.length;i++){let c=str.charAt(i),n=AbstractBase64UrlEncoder.REVERSE_DICT.get(c),s=FixedIntegerEncoder.encode(n,6);bitString+=s}return bitString}}class CompressedBase64UrlEncoder extends AbstractBase64UrlEncoder{pad(bitString){while(bitString.length%8>0)bitString+="0";while(bitString.length%6>0)bitString+="0";return bitString}}class FibonacciIntegerEncoder{static encode(value){let fib=[];if(value>=1){if(fib.push(1),value>=2){fib.push(2);let i=2;while(value>=fib[i-1]+fib[i-2])fib.push(fib[i-1]+fib[i-2]),i++}}let bitString="1";for(let i=fib.length-1;i>=0;i--){let f=fib[i];if(value>=f)bitString="1"+bitString,value-=f;else bitString="0"+bitString}return bitString}static decode(bitString){if(!/^[0-1]*$/.test(bitString)||bitString.length<2||bitString.indexOf("11")!==bitString.length-2)throw new DecodingError("Undecodable FibonacciInteger '"+bitString+"'");let value=0,fib=[];for(let i=0;i<bitString.length-1;i++)if(i===0)fib.push(1);else if(i===1)fib.push(2);else fib.push(fib[i-1]+fib[i-2]);for(let i=0;i<bitString.length-1;i++)if(bitString.charAt(i)==="1")value+=fib[i];return value}}class BooleanEncoder{static encode(value){if(value===!0)return"1";else if(value===!1)return"0";else throw new EncodingError("Unencodable Boolean '"+value+"'")}static decode(bitString){if(bitString==="1")return!0;else if(bitString==="0")return!1;else throw new DecodingError("Undecodable Boolean '"+bitString+"'")}}class FibonacciIntegerRangeEncoder{static encode(value){value=value.sort((n1,n2)=>n1-n2);let groups=[],offset=0,groupStartIndex=0;while(groupStartIndex<value.length){let groupEndIndex=groupStartIndex;while(groupEndIndex<value.length-1&&value[groupEndIndex]+1===value[groupEndIndex+1])groupEndIndex++;groups.push(value.slice(groupStartIndex,groupEndIndex+1)),groupStartIndex=groupEndIndex+1}let bitString=FixedIntegerEncoder.encode(groups.length,12);for(let i=0;i<groups.length;i++)if(groups[i].length==1){let v=groups[i][0]-offset;offset=groups[i][0],bitString+="0"+FibonacciIntegerEncoder.encode(v)}else{let startVal=groups[i][0]-offset;offset=groups[i][0];let endVal=groups[i][groups[i].length-1]-offset;offset=groups[i][groups[i].length-1],bitString+="1"+FibonacciIntegerEncoder.encode(startVal)+FibonacciIntegerEncoder.encode(endVal)}return bitString}static decode(bitString){if(!/^[0-1]*$/.test(bitString)||bitString.length<12)throw new DecodingError("Undecodable FibonacciIntegerRange '"+bitString+"'");let value=[],count=FixedIntegerEncoder.decode(bitString.substring(0,12)),offset=0,startIndex=12;for(let i=0;i<count;i++){let group=BooleanEncoder.decode(bitString.substring(startIndex,startIndex+1));if(startIndex++,group===!0){let index=bitString.indexOf("11",startIndex),start=FibonacciIntegerEncoder.decode(bitString.substring(startIndex,index+2))+offset;offset=start,startIndex=index+2,index=bitString.indexOf("11",startIndex);let end=FibonacciIntegerEncoder.decode(bitString.substring(startIndex,index+2))+offset;offset=end,startIndex=index+2;for(let j=start;j<=end;j++)value.push(j)}else{let index=bitString.indexOf("11",startIndex),val=FibonacciIntegerEncoder.decode(bitString.substring(startIndex,index+2))+offset;offset=val,value.push(val),startIndex=index+2}}return value}}class AbstractEncodableBitStringDataType{value;hasValue(){return this.value!==void 0&&this.value!==null}getValue(){return this.value}setValue(value){this.value=value}}class EncodableFibonacciIntegerRange extends AbstractEncodableBitStringDataType{constructor(value){super();this.setValue(value)}encode(){return FibonacciIntegerRangeEncoder.encode(this.value)}decode(bitString){this.value=FibonacciIntegerRangeEncoder.decode(bitString)}substring(bitString,fromIndex){let count=FixedIntegerEncoder.decode(bitString.substring(fromIndex,fromIndex+12)),index=fromIndex+12;for(let i=0;i<count;i++)if(bitString.charAt(index)==="1")index=bitString.indexOf("11",bitString.indexOf("11",index+1)+2)+2;else index=bitString.indexOf("11",index+1)+2;return bitString.substring(fromIndex,index)}getValue(){return[...super.getValue()]}setValue(value){super.setValue([...new Set(value)].sort((n1,n2)=>n1-n2))}}class EncodableFixedInteger extends AbstractEncodableBitStringDataType{bitStringLength;constructor(bitStringLength,value){super();this.bitStringLength=bitStringLength,this.setValue(value)}encode(){return FixedIntegerEncoder.encode(this.value,this.bitStringLength)}decode(bitString){this.value=FixedIntegerEncoder.decode(bitString)}substring(bitString,fromIndex){return bitString.substring(fromIndex,fromIndex+this.bitStringLength)}}var HeaderV1Field;(function(HeaderV1Field2){HeaderV1Field2.ID="Id",HeaderV1Field2.VERSION="Version",HeaderV1Field2.SECTION_IDS="SectionIds"})(HeaderV1Field||(HeaderV1Field={}));class AbstractEncodableBitStringSection{fields;fieldOrder;constructor(fields,fieldOrder){this.fields=fields,this.fieldOrder=fieldOrder}hasField(fieldName){return this.fields.has(fieldName)}getFieldValue(fieldName){if(this.fields.has(fieldName))return this.fields.get(fieldName).getValue();else return null}setFieldValue(fieldName,value){if(this.fields.has(fieldName))this.fields.get(fieldName).setValue(value);else throw new Error(fieldName+" not found")}getFieldOrder(){return this.fieldOrder}encodeToBitString(){let bitString="";for(let i=0;i<this.fieldOrder.length;i++){let fieldName=this.fieldOrder[i];if(this.fields.has(fieldName)){let field=this.fields.get(fieldName);bitString+=field.encode()}else throw new Error("Field not found: '"+fieldName+"'")}return bitString}decodeFromBitString(bitString){let index=0;for(let i=0;i<this.fieldOrder.length;i++){let fieldName=this.fieldOrder[i];if(this.fields.has(fieldName)){let field=this.fields.get(fieldName),substring=field.substring(bitString,index);field.decode(substring),index+=substring.length}else throw new Error("Field not found: '"+fieldName+"'")}}toObj(){let obj={};for(let i=0;i<this.fieldOrder.length;i++){let fieldName=this.fieldOrder[i];if(this.fields.has(fieldName)){let value=this.fields.get(fieldName).getValue();obj[fieldName]=value}}return obj}}class HeaderV1 extends AbstractEncodableBitStringSection{static ID=3;static VERSION=1;static NAME="header";base64UrlEncoder=new CompressedBase64UrlEncoder;constructor(encodedString){let fields=new Map;fields.set(HeaderV1Field.ID.toString(),new EncodableFixedInteger(6,HeaderV1.ID)),fields.set(HeaderV1Field.VERSION.toString(),new EncodableFixedInteger(6,HeaderV1.VERSION)),fields.set(HeaderV1Field.SECTION_IDS.toString(),new EncodableFibonacciIntegerRange([]));let fieldOrder=[HeaderV1Field.ID.toString(),HeaderV1Field.VERSION.toString(),HeaderV1Field.SECTION_IDS.toString()];super(fields,fieldOrder);if(encodedString&&encodedString.length>0)this.decode(encodedString)}encode(){let bitString=this.encodeToBitString();return this.base64UrlEncoder.encode(bitString)}decode(encodedString){let bitString=this.base64UrlEncoder.decode(encodedString);this.decodeFromBitString(bitString)}getId(){return HeaderV1.ID}getName(){return HeaderV1.NAME}}class EncodableBoolean extends AbstractEncodableBitStringDataType{constructor(value){super();this.setValue(value)}encode(){return BooleanEncoder.encode(this.value)}decode(bitString){this.value=BooleanEncoder.decode(bitString)}substring(bitString,fromIndex){return bitString.substring(fromIndex,fromIndex+1)}}class DatetimeEncoder{static encode(value){if(value)return FixedIntegerEncoder.encode(Math.round(value.getTime()/100),36);else return FixedIntegerEncoder.encode(0,36)}static decode(bitString){if(!/^[0-1]*$/.test(bitString)||bitString.length!==36)throw new DecodingError("Undecodable Datetime '"+bitString+"'");return new Date(FixedIntegerEncoder.decode(bitString)*100)}}class EncodableDatetime extends AbstractEncodableBitStringDataType{constructor(value){super();this.setValue(value)}encode(){return DatetimeEncoder.encode(this.value)}decode(bitString){this.value=DatetimeEncoder.decode(bitString)}substring(bitString,fromIndex){return bitString.substring(fromIndex,fromIndex+36)}}class FixedBitfieldEncoder{static encode(value,bitStringLength){let bitString="";for(let i=0;i<value.length;i++)bitString+=BooleanEncoder.encode(value[i]);while(bitString.length<bitStringLength)bitString+="0";return bitString}static decode(bitString){if(!/^[0-1]*$/.test(bitString))throw new DecodingError("Undecodable FixedBitfield '"+bitString+"'");let value=[];for(let i=0;i<bitString.length;i++)value.push(BooleanEncoder.decode(bitString.substring(i,i+1)));return value}}class EncodableFlexibleBitfield extends AbstractEncodableBitStringDataType{getLength;constructor(getLength,value){super();this.getLength=getLength,this.setValue(value)}encode(){return FixedBitfieldEncoder.encode(this.value,this.getLength())}decode(bitString){this.value=FixedBitfieldEncoder.decode(bitString)}substring(bitString,fromIndex){return bitString.substring(fromIndex,fromIndex+this.getLength())}getValue(){return[...super.getValue()]}setValue(value){let numElements=this.getLength(),v=[...value];for(let i=v.length;i<numElements;i++)v.push(!1);if(v.length>numElements)v=v.slice(0,numElements);super.setValue([...v])}}class EncodableFixedBitfield extends AbstractEncodableBitStringDataType{numElements;constructor(value){super();this.numElements=value.length,this.setValue(value)}encode(){return FixedBitfieldEncoder.encode(this.value,this.numElements)}decode(bitString){this.value=FixedBitfieldEncoder.decode(bitString)}substring(bitString,fromIndex){return bitString.substring(fromIndex,fromIndex+this.numElements)}getValue(){return[...super.getValue()]}setValue(value){let v=[...value];for(let i=v.length;i<this.numElements;i++)v.push(!1);if(v.length>this.numElements)v=v.slice(0,this.numElements);super.setValue(v)}}class FixedStringEncoder{static encode(value,stringLength){while(value.length<stringLength)value+=" ";let bitString="";for(let i=0;i<value.length;i++){let code=value.charCodeAt(i);if(code===32)bitString+=FixedIntegerEncoder.encode(63,6);else if(code>=65)bitString+=FixedIntegerEncoder.encode(value.charCodeAt(i)-65,6);else throw new EncodingError("Unencodable FixedString '"+value+"'")}return bitString}static decode(bitString){if(!/^[0-1]*$/.test(bitString)||bitString.length%6!==0)throw new DecodingError("Undecodable FixedString '"+bitString+"'");let value="";for(let i=0;i<bitString.length;i+=6){let code=FixedIntegerEncoder.decode(bitString.substring(i,i+6));if(code===63)value+=" ";else value+=String.fromCharCode(code+65)}return value.trim()}}class EncodableFixedString extends AbstractEncodableBitStringDataType{stringLength;constructor(stringLength,value){super();this.stringLength=stringLength,this.setValue(value)}encode(){return FixedStringEncoder.encode(this.value,this.stringLength)}decode(bitString){this.value=FixedStringEncoder.decode(bitString)}substring(bitString,fromIndex){return bitString.substring(fromIndex,fromIndex+this.stringLength*6)}}class AbstractEncodableSegmentedBitStringSection{fields;segments;constructor(fields,segments){this.fields=fields,this.segments=segments}hasField(fieldName){return this.fields.has(fieldName)}getFieldValue(fieldName){if(this.fields.has(fieldName))return this.fields.get(fieldName).getValue();else return null}setFieldValue(fieldName,value){if(this.fields.has(fieldName))this.fields.get(fieldName).setValue(value);else throw new Error(fieldName+" not found")}getSegments(){return this.segments}encodeSegmentsToBitStrings(){let segmentBitStrings=[];for(let i=0;i<this.segments.length;i++){let segmentBitString="";for(let j=0;j<this.segments[i].length;j++){let fieldName=this.segments[i][j];if(this.fields.has(fieldName))try{let field=this.fields.get(fieldName);segmentBitString+=field.encode()}catch(e){throw new Error("Unable to encode "+fieldName)}else throw new Error("Field not found: '"+fieldName+"'")}segmentBitStrings.push(segmentBitString)}return segmentBitStrings}decodeSegmentsFromBitStrings(segmentBitStrings){for(let i=0;i<this.segments.length&&i<segmentBitStrings.length;i++){let segmentBitString=segmentBitStrings[i];if(segmentBitString&&segmentBitString.length>0){let index=0;for(let j=0;j<this.segments[i].length;j++){let fieldName=this.segments[i][j];if(this.fields.has(fieldName))try{let field=this.fields.get(fieldName),substring=field.substring(segmentBitString,index);field.decode(substring),index+=substring.length}catch(e){throw new Error("Unable to decode "+fieldName)}else throw new Error("Field not found: '"+fieldName+"'")}}}}toObj(){let obj={};for(let i=0;i<this.segments.length;i++)for(let j=0;j<this.segments[i].length;j++){let fieldName=this.segments[i][j];if(this.fields.has(fieldName)){let value=this.fields.get(fieldName).getValue();obj[fieldName]=value}}return obj}}class FixedIntegerRangeEncoder{static encode(value){value.sort((n1,n2)=>n1-n2);let groups=[],groupStartIndex=0;while(groupStartIndex<value.length){let groupEndIndex=groupStartIndex;while(groupEndIndex<value.length-1&&value[groupEndIndex]+1===value[groupEndIndex+1])groupEndIndex++;groups.push(value.slice(groupStartIndex,groupEndIndex+1)),groupStartIndex=groupEndIndex+1}let bitString=FixedIntegerEncoder.encode(groups.length,12);for(let i=0;i<groups.length;i++)if(groups[i].length===1)bitString+="0"+FixedIntegerEncoder.encode(groups[i][0],16);else bitString+="1"+FixedIntegerEncoder.encode(groups[i][0],16)+FixedIntegerEncoder.encode(groups[i][groups[i].length-1],16);return bitString}static decode(bitString){if(!/^[0-1]*$/.test(bitString)||bitString.length<12)throw new DecodingError("Undecodable FixedIntegerRange '"+bitString+"'");let value=[],count=FixedIntegerEncoder.decode(bitString.substring(0,12)),startIndex=12;for(let i=0;i<count;i++){let group=BooleanEncoder.decode(bitString.substring(startIndex,startIndex+1));if(startIndex++,group===!0){let start=FixedIntegerEncoder.decode(bitString.substring(startIndex,startIndex+16));startIndex+=16;let end=FixedIntegerEncoder.decode(bitString.substring(startIndex,startIndex+16));startIndex+=16;for(let j=start;j<=end;j++)value.push(j)}else{let val=FixedIntegerEncoder.decode(bitString.substring(startIndex,startIndex+16));value.push(val),startIndex+=16}}return value}}class EncodableFixedIntegerRange extends AbstractEncodableBitStringDataType{constructor(value){super();this.setValue(value)}encode(){return FixedIntegerRangeEncoder.encode(this.value)}decode(bitString){this.value=FixedIntegerRangeEncoder.decode(bitString)}substring(bitString,fromIndex){let count=FixedIntegerEncoder.decode(bitString.substring(fromIndex,fromIndex+12)),index=fromIndex+12;for(let i=0;i<count;i++)if(bitString.charAt(index)==="1")index+=33;else index+=17;return bitString.substring(fromIndex,index)}getValue(){return[...super.getValue()]}setValue(value){super.setValue([...new Set(value)].sort((n1,n2)=>n1-n2))}}class EncodableOptimizedFixedRange extends AbstractEncodableBitStringDataType{constructor(value){super();this.setValue(value)}encode(){let max=this.value.length>0?this.value[this.value.length-1]:0,rangeBitString=FixedIntegerRangeEncoder.encode(this.value),rangeLength=rangeBitString.length,bitFieldLength=max;if(rangeLength<=bitFieldLength)return FixedIntegerEncoder.encode(max,16)+"1"+rangeBitString;else{let bits=[],index=0;for(let i=0;i<max;i++)if(i===this.value[index]-1)bits[i]=!0,index++;else bits[i]=!1;return FixedIntegerEncoder.encode(max,16)+"0"+FixedBitfieldEncoder.encode(bits,bitFieldLength)}}decode(bitString){if(bitString.charAt(16)==="1")this.value=FixedIntegerRangeEncoder.decode(bitString.substring(17));else{let value=[],bits=FixedBitfieldEncoder.decode(bitString.substring(17));for(let i=0;i<bits.length;i++)if(bits[i]===!0)value.push(i+1);this.value=value}}substring(bitString,fromIndex){let max=FixedIntegerEncoder.decode(bitString.substring(fromIndex,fromIndex+16));if(bitString.charAt(fromIndex+16)==="1")return bitString.substring(fromIndex,fromIndex+17)+new EncodableFixedIntegerRange([]).substring(bitString,fromIndex+17);else return bitString.substring(fromIndex,fromIndex+17+max)}getValue(){return[...super.getValue()]}setValue(value){super.setValue([...new Set(value)].sort((n1,n2)=>n1-n2))}}var TcfEuV2Field;(function(TcfEuV2Field2){TcfEuV2Field2.VERSION="Version",TcfEuV2Field2.CREATED="Created",TcfEuV2Field2.LAST_UPDATED="LastUpdated",TcfEuV2Field2.CMP_ID="CmpId",TcfEuV2Field2.CMP_VERSION="CmpVersion",TcfEuV2Field2.CONSENT_SCREEN="ConsentScreen",TcfEuV2Field2.CONSENT_LANGUAGE="ConsentLanguage",TcfEuV2Field2.VENDOR_LIST_VERSION="VendorListVersion",TcfEuV2Field2.POLICY_VERSION="PolicyVersion",TcfEuV2Field2.IS_SERVICE_SPECIFIC="IsServiceSpecific",TcfEuV2Field2.USE_NON_STANDARD_STACKS="UseNonStandardStacks",TcfEuV2Field2.SPECIAL_FEATURE_OPTINS="SpecialFeatureOptins",TcfEuV2Field2.PURPOSE_CONSENTS="PurposeConsents",TcfEuV2Field2.PURPOSE_LEGITIMATE_INTERESTS="PurposeLegitimateInterests",TcfEuV2Field2.PURPOSE_ONE_TREATMENT="PurposeOneTreatment",TcfEuV2Field2.PUBLISHER_COUNTRY_CODE="PublisherCountryCode",TcfEuV2Field2.VENDOR_CONSENTS="VendorConsents",TcfEuV2Field2.VENDOR_LEGITIMATE_INTERESTS="VendorLegitimateInterests",TcfEuV2Field2.PUBLISHER_RESTRICTIONS="PublisherRestrictions",TcfEuV2Field2.PUBLISHER_PURPOSES_SEGMENT_TYPE="PublisherPurposesSegmentType",TcfEuV2Field2.PUBLISHER_CONSENTS="PublisherConsents",TcfEuV2Field2.PUBLISHER_LEGITIMATE_INTERESTS="PublisherLegitimateInterests",TcfEuV2Field2.NUM_CUSTOM_PURPOSES="NumCustomPurposes",TcfEuV2Field2.PUBLISHER_CUSTOM_CONSENTS="PublisherCustomConsents",TcfEuV2Field2.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS="PublisherCustomLegitimateInterests",TcfEuV2Field2.VENDORS_ALLOWED_SEGMENT_TYPE="VendorsAllowedSegmentType",TcfEuV2Field2.VENDORS_ALLOWED="VendorsAllowed",TcfEuV2Field2.VENDORS_DISCLOSED_SEGMENT_TYPE="VendorsDisclosedSegmentType",TcfEuV2Field2.VENDORS_DISCLOSED="VendorsDisclosed"})(TcfEuV2Field||(TcfEuV2Field={}));class TraditionalBase64UrlEncoder extends AbstractBase64UrlEncoder{pad(bitString){while(bitString.length%24>0)bitString+="0";return bitString}}class TcfEuV2 extends AbstractEncodableSegmentedBitStringSection{static ID=2;static VERSION=2;static NAME="tcfeuv2";base64UrlEncoder=new TraditionalBase64UrlEncoder;constructor(encodedString){let fields=new Map,date=new Date;fields.set(TcfEuV2Field.VERSION.toString(),new EncodableFixedInteger(6,TcfEuV2.VERSION)),fields.set(TcfEuV2Field.CREATED.toString(),new EncodableDatetime(date)),fields.set(TcfEuV2Field.LAST_UPDATED.toString(),new EncodableDatetime(date)),fields.set(TcfEuV2Field.CMP_ID.toString(),new EncodableFixedInteger(12,0)),fields.set(TcfEuV2Field.CMP_VERSION.toString(),new EncodableFixedInteger(12,0)),fields.set(TcfEuV2Field.CONSENT_SCREEN.toString(),new EncodableFixedInteger(6,0)),fields.set(TcfEuV2Field.CONSENT_LANGUAGE.toString(),new EncodableFixedString(2,"EN")),fields.set(TcfEuV2Field.VENDOR_LIST_VERSION.toString(),new EncodableFixedInteger(12,0)),fields.set(TcfEuV2Field.POLICY_VERSION.toString(),new EncodableFixedInteger(6,2)),fields.set(TcfEuV2Field.IS_SERVICE_SPECIFIC.toString(),new EncodableBoolean(!1)),fields.set(TcfEuV2Field.USE_NON_STANDARD_STACKS.toString(),new EncodableBoolean(!1)),fields.set(TcfEuV2Field.SPECIAL_FEATURE_OPTINS.toString(),new EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),fields.set(TcfEuV2Field.PURPOSE_CONSENTS.toString(),new EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),fields.set(TcfEuV2Field.PURPOSE_LEGITIMATE_INTERESTS.toString(),new EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),fields.set(TcfEuV2Field.PURPOSE_ONE_TREATMENT.toString(),new EncodableBoolean(!1)),fields.set(TcfEuV2Field.PUBLISHER_COUNTRY_CODE.toString(),new EncodableFixedString(2,"AA")),fields.set(TcfEuV2Field.VENDOR_CONSENTS.toString(),new EncodableOptimizedFixedRange([])),fields.set(TcfEuV2Field.VENDOR_LEGITIMATE_INTERESTS.toString(),new EncodableOptimizedFixedRange([])),fields.set(TcfEuV2Field.PUBLISHER_RESTRICTIONS.toString(),new EncodableFixedIntegerRange([])),fields.set(TcfEuV2Field.PUBLISHER_PURPOSES_SEGMENT_TYPE.toString(),new EncodableFixedInteger(3,3)),fields.set(TcfEuV2Field.PUBLISHER_CONSENTS.toString(),new EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),fields.set(TcfEuV2Field.PUBLISHER_LEGITIMATE_INTERESTS.toString(),new EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]));let numCustomPurposes=new EncodableFixedInteger(6,0);fields.set(TcfEuV2Field.NUM_CUSTOM_PURPOSES.toString(),numCustomPurposes),fields.set(TcfEuV2Field.PUBLISHER_CUSTOM_CONSENTS.toString(),new EncodableFlexibleBitfield(()=>{return numCustomPurposes.getValue()},[])),fields.set(TcfEuV2Field.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS.toString(),new EncodableFlexibleBitfield(()=>{return numCustomPurposes.getValue()},[])),fields.set(TcfEuV2Field.VENDORS_ALLOWED_SEGMENT_TYPE.toString(),new EncodableFixedInteger(3,2)),fields.set(TcfEuV2Field.VENDORS_ALLOWED.toString(),new EncodableOptimizedFixedRange([])),fields.set(TcfEuV2Field.VENDORS_DISCLOSED_SEGMENT_TYPE.toString(),new EncodableFixedInteger(3,1)),fields.set(TcfEuV2Field.VENDORS_DISCLOSED.toString(),new EncodableOptimizedFixedRange([]));let coreSegment=[TcfEuV2Field.VERSION.toString(),TcfEuV2Field.CREATED.toString(),TcfEuV2Field.LAST_UPDATED.toString(),TcfEuV2Field.CMP_ID.toString(),TcfEuV2Field.CMP_VERSION.toString(),TcfEuV2Field.CONSENT_SCREEN.toString(),TcfEuV2Field.CONSENT_LANGUAGE.toString(),TcfEuV2Field.VENDOR_LIST_VERSION.toString(),TcfEuV2Field.POLICY_VERSION.toString(),TcfEuV2Field.IS_SERVICE_SPECIFIC.toString(),TcfEuV2Field.USE_NON_STANDARD_STACKS.toString(),TcfEuV2Field.SPECIAL_FEATURE_OPTINS.toString(),TcfEuV2Field.PURPOSE_CONSENTS.toString(),TcfEuV2Field.PURPOSE_LEGITIMATE_INTERESTS.toString(),TcfEuV2Field.PURPOSE_ONE_TREATMENT.toString(),TcfEuV2Field.PUBLISHER_COUNTRY_CODE.toString(),TcfEuV2Field.VENDOR_CONSENTS.toString(),TcfEuV2Field.VENDOR_LEGITIMATE_INTERESTS.toString(),TcfEuV2Field.PUBLISHER_RESTRICTIONS.toString()],publisherPurposesSegment=[TcfEuV2Field.PUBLISHER_PURPOSES_SEGMENT_TYPE.toString(),TcfEuV2Field.PUBLISHER_CONSENTS.toString(),TcfEuV2Field.PUBLISHER_LEGITIMATE_INTERESTS.toString(),TcfEuV2Field.NUM_CUSTOM_PURPOSES.toString(),TcfEuV2Field.PUBLISHER_CUSTOM_CONSENTS.toString(),TcfEuV2Field.PUBLISHER_CUSTOM_LEGITIMATE_INTERESTS.toString()],vendorsAllowedSegment=[TcfEuV2Field.VENDORS_ALLOWED_SEGMENT_TYPE.toString(),TcfEuV2Field.VENDORS_ALLOWED.toString()],vendorsDisclosedSegment=[TcfEuV2Field.VENDORS_DISCLOSED_SEGMENT_TYPE.toString(),TcfEuV2Field.VENDORS_DISCLOSED.toString()],segments=[coreSegment,publisherPurposesSegment,vendorsAllowedSegment,vendorsDisclosedSegment];super(fields,segments);if(encodedString&&encodedString.length>0)this.decode(encodedString)}encode(){let segmentBitStrings=this.encodeSegmentsToBitStrings(),encodedSegments=[];if(encodedSegments.push(this.base64UrlEncoder.encode(segmentBitStrings[0])),this.getFieldValue(TcfEuV2Field.IS_SERVICE_SPECIFIC.toString())){if(segmentBitStrings[1]&&segmentBitStrings[1].length>0)encodedSegments.push(this.base64UrlEncoder.encode(segmentBitStrings[1]))}else{if(segmentBitStrings[2]&&segmentBitStrings[2].length>0)encodedSegments.push(this.base64UrlEncoder.encode(segmentBitStrings[2]));if(segmentBitStrings[3]&&segmentBitStrings[3].length>0)encodedSegments.push(this.base64UrlEncoder.encode(segmentBitStrings[3]))}return encodedSegments.join(".")}decode(encodedSection){let encodedSegments=encodedSection.split("."),segmentBitStrings=[];for(let i=0;i<encodedSegments.length;i++){let segmentBitString=this.base64UrlEncoder.decode(encodedSegments[i]);switch(segmentBitString.substring(0,3)){case"000":{segmentBitStrings[0]=segmentBitString;break}case"001":{segmentBitStrings[3]=segmentBitString;break}case"010":{segmentBitStrings[2]=segmentBitString;break}case"011":{segmentBitStrings[1]=segmentBitString;break}default:throw new DecodingError("Unable to decode segment '"+encodedSegments[i]+"'")}}this.decodeSegmentsFromBitStrings(segmentBitStrings)}setFieldValue(fieldName,value){if(super.setFieldValue(fieldName,value),fieldName!==TcfEuV2Field.CREATED.toString()&&fieldName!==TcfEuV2Field.LAST_UPDATED.toString()){const date=new Date,utcDate=new Date(Date.UTC(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate()));this.setFieldValue(TcfEuV2Field.CREATED.toString(),utcDate),this.setFieldValue(TcfEuV2Field.LAST_UPDATED.toString(),utcDate)}}getId(){return TcfEuV2.ID}getName(){return TcfEuV2.NAME}}var TcfCaV1Field;(function(TcfCaV1Field2){TcfCaV1Field2.VERSION="Version",TcfCaV1Field2.CREATED="Created",TcfCaV1Field2.LAST_UPDATED="LastUpdated",TcfCaV1Field2.CMP_ID="CmpId",TcfCaV1Field2.CMP_VERSION="CmpVersion",TcfCaV1Field2.CONSENT_SCREEN="ConsentScreen",TcfCaV1Field2.CONSENT_LANGUAGE="ConsentLanguage",TcfCaV1Field2.VENDOR_LIST_VERSION="VendorListVersion",TcfCaV1Field2.TCF_POLICY_VERSION="TcfPolicyVersion",TcfCaV1Field2.USE_NON_STANDARD_STACKS="UseNonStandardStacks",TcfCaV1Field2.SPECIAL_FEATURE_EXPRESS_CONSENT="SpecialFeatureExpressConsent",TcfCaV1Field2.PURPOSES_EXPRESS_CONSENT="PurposesExpressConsent",TcfCaV1Field2.PURPOSES_IMPLIED_CONSENT="PurposesImpliedConsent",TcfCaV1Field2.VENDOR_EXPRESS_CONSENT="VendorExpressConsent",TcfCaV1Field2.VENDOR_IMPLIED_CONSENT="VendorImpliedConsent",TcfCaV1Field2.SEGMENT_TYPE="SegmentType",TcfCaV1Field2.PUB_PURPOSES_EXPRESS_CONSENT="PubPurposesExpressConsent",TcfCaV1Field2.PUB_PURPOSES_IMPLIED_CONSENT="PubPurposesImpliedConsent",TcfCaV1Field2.NUM_CUSTOM_PURPOSES="NumCustomPurposes",TcfCaV1Field2.CUSTOM_PURPOSES_EXPRESS_CONSENT="CustomPurposesExpressConsent",TcfCaV1Field2.CUSTOM_PURPOSES_IMPLIED_CONSENT="CustomPurposesImpliedConsent"})(TcfCaV1Field||(TcfCaV1Field={}));class TcfCaV1 extends AbstractEncodableSegmentedBitStringSection{static ID=5;static VERSION=2;static NAME="tcfcav1";base64UrlEncoder=new CompressedBase64UrlEncoder;constructor(encodedString){let fields=new Map,date=new Date;fields.set(TcfCaV1Field.VERSION.toString(),new EncodableFixedInteger(6,TcfCaV1.VERSION)),fields.set(TcfCaV1Field.CREATED.toString(),new EncodableDatetime(date)),fields.set(TcfCaV1Field.LAST_UPDATED.toString(),new EncodableDatetime(date)),fields.set(TcfCaV1Field.CMP_ID.toString(),new EncodableFixedInteger(12,0)),fields.set(TcfCaV1Field.CMP_VERSION.toString(),new EncodableFixedInteger(12,0)),fields.set(TcfCaV1Field.CONSENT_SCREEN.toString(),new EncodableFixedInteger(6,0)),fields.set(TcfCaV1Field.CONSENT_LANGUAGE.toString(),new EncodableFixedString(2,"EN")),fields.set(TcfCaV1Field.VENDOR_LIST_VERSION.toString(),new EncodableFixedInteger(12,0)),fields.set(TcfCaV1Field.TCF_POLICY_VERSION.toString(),new EncodableFixedInteger(6,1)),fields.set(TcfCaV1Field.USE_NON_STANDARD_STACKS.toString(),new EncodableBoolean(!1)),fields.set(TcfCaV1Field.SPECIAL_FEATURE_EXPRESS_CONSENT.toString(),new EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),fields.set(TcfCaV1Field.PURPOSES_EXPRESS_CONSENT.toString(),new EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),fields.set(TcfCaV1Field.PURPOSES_IMPLIED_CONSENT.toString(),new EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),fields.set(TcfCaV1Field.VENDOR_EXPRESS_CONSENT.toString(),new EncodableOptimizedFixedRange([])),fields.set(TcfCaV1Field.VENDOR_IMPLIED_CONSENT.toString(),new EncodableOptimizedFixedRange([])),fields.set(TcfCaV1Field.SEGMENT_TYPE.toString(),new EncodableFixedInteger(3,3)),fields.set(TcfCaV1Field.PUB_PURPOSES_EXPRESS_CONSENT.toString(),new EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1])),fields.set(TcfCaV1Field.PUB_PURPOSES_IMPLIED_CONSENT.toString(),new EncodableFixedBitfield([!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1]));let numCustomPurposes=new EncodableFixedInteger(6,0);fields.set(TcfCaV1Field.NUM_CUSTOM_PURPOSES.toString(),numCustomPurposes),fields.set(TcfCaV1Field.CUSTOM_PURPOSES_EXPRESS_CONSENT.toString(),new EncodableFlexibleBitfield(()=>{return numCustomPurposes.getValue()},[])),fields.set(TcfCaV1Field.CUSTOM_PURPOSES_IMPLIED_CONSENT.toString(),new EncodableFlexibleBitfield(()=>{return numCustomPurposes.getValue()},[]));let coreSegment=[TcfCaV1Field.VERSION.toString(),TcfCaV1Field.CREATED.toString(),TcfCaV1Field.LAST_UPDATED.toString(),TcfCaV1Field.CMP_ID.toString(),TcfCaV1Field.CMP_VERSION.toString(),TcfCaV1Field.CONSENT_SCREEN.toString(),TcfCaV1Field.CONSENT_LANGUAGE.toString(),TcfCaV1Field.VENDOR_LIST_VERSION.toString(),TcfCaV1Field.TCF_POLICY_VERSION.toString(),TcfCaV1Field.USE_NON_STANDARD_STACKS.toString(),TcfCaV1Field.SPECIAL_FEATURE_EXPRESS_CONSENT.toString(),TcfCaV1Field.PURPOSES_EXPRESS_CONSENT.toString(),TcfCaV1Field.PURPOSES_IMPLIED_CONSENT.toString(),TcfCaV1Field.VENDOR_EXPRESS_CONSENT.toString(),TcfCaV1Field.VENDOR_IMPLIED_CONSENT.toString()],publisherPurposesSegment=[TcfCaV1Field.SEGMENT_TYPE.toString(),TcfCaV1Field.PUB_PURPOSES_EXPRESS_CONSENT.toString(),TcfCaV1Field.PUB_PURPOSES_IMPLIED_CONSENT.toString(),TcfCaV1Field.NUM_CUSTOM_PURPOSES.toString(),TcfCaV1Field.CUSTOM_PURPOSES_EXPRESS_CONSENT.toString(),TcfCaV1Field.CUSTOM_PURPOSES_IMPLIED_CONSENT.toString()],segments=[coreSegment,publisherPurposesSegment];super(fields,segments);if(encodedString&&encodedString.length>0)this.decode(encodedString)}encode(){let segmentBitStrings=this.encodeSegmentsToBitStrings(),encodedSegments=[];if(encodedSegments.push(this.base64UrlEncoder.encode(segmentBitStrings[0])),segmentBitStrings[1]&&segmentBitStrings[1].length>0)encodedSegments.push(this.base64UrlEncoder.encode(segmentBitStrings[1]));return encodedSegments.join(".")}decode(encodedSection){let encodedSegments=encodedSection.split("."),segmentBitStrings=[];for(let i=0;i<encodedSegments.length;i++){let segmentBitString=this.base64UrlEncoder.decode(encodedSegments[i]);switch(segmentBitString.substring(0,3)){case"000":{segmentBitStrings[0]=segmentBitString;break}case"011":{segmentBitStrings[1]=segmentBitString;break}default:throw new DecodingError("Unable to decode segment '"+encodedSegments[i]+"'")}}this.decodeSegmentsFromBitStrings(segmentBitStrings)}setFieldValue(fieldName,value){if(super.setFieldValue(fieldName,value),fieldName!==TcfCaV1Field.CREATED.toString()&&fieldName!==TcfCaV1Field.LAST_UPDATED.toString()){const date=new Date,utcDate=new Date(Date.UTC(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate()));this.setFieldValue(TcfCaV1Field.CREATED.toString(),utcDate),this.setFieldValue(TcfCaV1Field.LAST_UPDATED.toString(),utcDate)}}getId(){return TcfCaV1.ID}getName(){return TcfCaV1.NAME}}class InvalidFieldError extends Error{constructor(msg){super(msg);this.name="InvalidFieldError"}}var UspV1Field;(function(UspV1Field2){UspV1Field2.VERSION="Version",UspV1Field2.NOTICE="Notice",UspV1Field2.OPT_OUT_SALE="OptOutSale",UspV1Field2.LSPA_COVERED="LspaCovered"})(UspV1Field||(UspV1Field={}));class UspV1{static ID=6;static VERSION=1;static NAME="uspv1";fields;constructor(encodedString){if(this.fields=new Map,this.fields.set(UspV1Field.VERSION.toString(),UspV1.VERSION),this.fields.set(UspV1Field.NOTICE.toString(),"-"),this.fields.set(UspV1Field.OPT_OUT_SALE.toString(),"-"),this.fields.set(UspV1Field.LSPA_COVERED.toString(),"-"),encodedString&&encodedString.length>0)this.decode(encodedString)}hasField(fieldName){return this.fields.has(fieldName)}getFieldValue(fieldName){if(this.fields.has(fieldName))return this.fields.get(fieldName);else return null}setFieldValue(fieldName,value){if(this.fields.has(fieldName))this.fields.set(fieldName,value);else throw new InvalidFieldError(fieldName+" not found")}toObj(){let obj={};for(let fieldName of this.fields.keys()){let value=this.fields.get(fieldName);obj[fieldName.toString()]=value}return obj}encode(){let str="";return str+=this.getFieldValue(UspV1Field.VERSION.toString()),str+=this.getFieldValue(UspV1Field.NOTICE.toString()),str+=this.getFieldValue(UspV1Field.OPT_OUT_SALE.toString()),str+=this.getFieldValue(UspV1Field.LSPA_COVERED.toString()),str}decode(encodedString){this.setFieldValue(UspV1Field.VERSION.toString(),parseInt(encodedString.charAt(0))),this.setFieldValue(UspV1Field.NOTICE.toString(),encodedString.charAt(1)),this.setFieldValue(UspV1Field.OPT_OUT_SALE.toString(),encodedString.charAt(2)),this.setFieldValue(UspV1Field.LSPA_COVERED.toString(),encodedString.charAt(3))}getId(){return UspV1.ID}getName(){return UspV1.NAME}}class FixedIntegerListEncoder{static encode(value,elementBitStringLength,numElements){let bitString="";for(let i=0;i<value.length;i++)bitString+=FixedIntegerEncoder.encode(value[i],elementBitStringLength);while(bitString.length<elementBitStringLength*numElements)bitString+="0";return bitString}static decode(bitString,elementBitStringLength,numElements){if(!/^[0-1]*$/.test(bitString))throw new DecodingError("Undecodable FixedInteger '"+bitString+"'");if(bitString.length>elementBitStringLength*numElements)throw new DecodingError("Undecodable FixedIntegerList '"+bitString+"'");if(bitString.length%elementBitStringLength!=0)throw new DecodingError("Undecodable FixedIntegerList '"+bitString+"'");while(bitString.length<elementBitStringLength*numElements)bitString+="0";if(bitString.length>elementBitStringLength*numElements)bitString=bitString.substring(0,elementBitStringLength*numElements);let value=[];for(let i=0;i<bitString.length;i+=elementBitStringLength)value.push(FixedIntegerEncoder.decode(bitString.substring(i,i+elementBitStringLength)));while(value.length<numElements)value.push(0);return value}}class EncodableFixedIntegerList extends AbstractEncodableBitStringDataType{elementBitStringLength;numElements;constructor(elementBitStringLength,value){super();this.elementBitStringLength=elementBitStringLength,this.numElements=value.length,this.setValue(value)}encode(){return FixedIntegerListEncoder.encode(this.value,this.elementBitStringLength,this.numElements)}decode(bitString){this.value=FixedIntegerListEncoder.decode(bitString,this.elementBitStringLength,this.numElements)}substring(bitString,fromIndex){return bitString.substring(fromIndex,fromIndex+this.elementBitStringLength*this.numElements)}getValue(){return[...super.getValue()]}setValue(value){let v=[...value];for(let i=v.length;i<this.numElements;i++)v.push(0);if(v.length>this.numElements)v=v.slice(0,this.numElements);super.setValue(v)}}var UsNatV1Field;(function(UsNatV1Field2){UsNatV1Field2.VERSION="Version",UsNatV1Field2.SHARING_NOTICE="SharingNotice",UsNatV1Field2.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",UsNatV1Field2.SHARING_OPT_OUT_NOTICE="SharingOptOutNotice",UsNatV1Field2.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",UsNatV1Field2.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE="SensitiveDataProcessingOptOutNotice",UsNatV1Field2.SENSITIVE_DATA_LIMIT_USE_NOTICE="SensitiveDataLimitUseNotice",UsNatV1Field2.SALE_OPT_OUT="SaleOptOut",UsNatV1Field2.SHARING_OPT_OUT="SharingOptOut",UsNatV1Field2.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",UsNatV1Field2.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",UsNatV1Field2.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",UsNatV1Field2.PERSONAL_DATA_CONSENTS="PersonalDataConsents",UsNatV1Field2.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",UsNatV1Field2.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",UsNatV1Field2.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",UsNatV1Field2.GPC_SEGMENT_TYPE="GpcSegmentType",UsNatV1Field2.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",UsNatV1Field2.GPC="Gpc"})(UsNatV1Field||(UsNatV1Field={}));class UsNatV1 extends AbstractEncodableSegmentedBitStringSection{static ID=7;static VERSION=1;static NAME="usnatv1";base64UrlEncoder=new CompressedBase64UrlEncoder;constructor(encodedString){let fields=new Map;fields.set(UsNatV1Field.VERSION.toString(),new EncodableFixedInteger(6,UsNatV1.VERSION)),fields.set(UsNatV1Field.SHARING_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsNatV1Field.SALE_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsNatV1Field.SHARING_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsNatV1Field.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsNatV1Field.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsNatV1Field.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsNatV1Field.SALE_OPT_OUT.toString(),new EncodableFixedInteger(2,0)),fields.set(UsNatV1Field.SHARING_OPT_OUT.toString(),new EncodableFixedInteger(2,0)),fields.set(UsNatV1Field.TARGETED_ADVERTISING_OPT_OUT.toString(),new EncodableFixedInteger(2,0)),fields.set(UsNatV1Field.SENSITIVE_DATA_PROCESSING.toString(),new EncodableFixedIntegerList(2,[0,0,0,0,0,0,0,0,0,0,0,0])),fields.set(UsNatV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new EncodableFixedIntegerList(2,[0,0])),fields.set(UsNatV1Field.PERSONAL_DATA_CONSENTS.toString(),new EncodableFixedInteger(2,0)),fields.set(UsNatV1Field.MSPA_COVERED_TRANSACTION.toString(),new EncodableFixedInteger(2,0)),fields.set(UsNatV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsNatV1Field.MSPA_SERVICE_PROVIDER_MODE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsNatV1Field.GPC_SEGMENT_TYPE.toString(),new EncodableFixedInteger(2,1)),fields.set(UsNatV1Field.GPC_SEGMENT_INCLUDED.toString(),new EncodableBoolean(!0)),fields.set(UsNatV1Field.GPC.toString(),new EncodableBoolean(!1));let coreSegment=[UsNatV1Field.VERSION.toString(),UsNatV1Field.SHARING_NOTICE.toString(),UsNatV1Field.SALE_OPT_OUT_NOTICE.toString(),UsNatV1Field.SHARING_OPT_OUT_NOTICE.toString(),UsNatV1Field.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),UsNatV1Field.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),UsNatV1Field.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),UsNatV1Field.SALE_OPT_OUT.toString(),UsNatV1Field.SHARING_OPT_OUT.toString(),UsNatV1Field.TARGETED_ADVERTISING_OPT_OUT.toString(),UsNatV1Field.SENSITIVE_DATA_PROCESSING.toString(),UsNatV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),UsNatV1Field.PERSONAL_DATA_CONSENTS.toString(),UsNatV1Field.MSPA_COVERED_TRANSACTION.toString(),UsNatV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),UsNatV1Field.MSPA_SERVICE_PROVIDER_MODE.toString()],gpcSegment=[UsNatV1Field.GPC_SEGMENT_TYPE.toString(),UsNatV1Field.GPC.toString()],segments=[coreSegment,gpcSegment];super(fields,segments);if(encodedString&&encodedString.length>0)this.decode(encodedString)}encode(){let segmentBitStrings=this.encodeSegmentsToBitStrings(),encodedSegments=[];if(encodedSegments.push(this.base64UrlEncoder.encode(segmentBitStrings[0])),segmentBitStrings[1]&&segmentBitStrings[1].length>0){if(this.fields.get(UsNatV1Field.GPC_SEGMENT_INCLUDED).getValue()===!0)encodedSegments.push(this.base64UrlEncoder.encode(segmentBitStrings[1]))}return encodedSegments.join(".")}decode(encodedSection){let encodedSegments=encodedSection.split("."),segmentBitStrings=[],gpcSegmentIncluded=!1;for(let i=0;i<encodedSegments.length;i++){let segmentBitString=this.base64UrlEncoder.decode(encodedSegments[i]);switch(segmentBitString.substring(0,2)){case"00":{segmentBitStrings[0]=segmentBitString;break}case"01":{gpcSegmentIncluded=!0,segmentBitStrings[1]=segmentBitString;break}default:throw new DecodingError("Unable to decode segment '"+encodedSegments[i]+"'")}}this.decodeSegmentsFromBitStrings(segmentBitStrings),this.fields.get(UsNatV1Field.GPC_SEGMENT_INCLUDED).setValue(gpcSegmentIncluded)}getId(){return UsNatV1.ID}getName(){return UsNatV1.NAME}}var UsCaV1Field;(function(UsCaV1Field2){UsCaV1Field2.VERSION="Version",UsCaV1Field2.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",UsCaV1Field2.SHARING_OPT_OUT_NOTICE="SharingOptOutNotice",UsCaV1Field2.SENSITIVE_DATA_LIMIT_USE_NOTICE="SensitiveDataLimitUseNotice",UsCaV1Field2.SALE_OPT_OUT="SaleOptOut",UsCaV1Field2.SHARING_OPT_OUT="SharingOptOut",UsCaV1Field2.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",UsCaV1Field2.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",UsCaV1Field2.PERSONAL_DATA_CONSENTS="PersonalDataConsents",UsCaV1Field2.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",UsCaV1Field2.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",UsCaV1Field2.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",UsCaV1Field2.GPC_SEGMENT_TYPE="GpcSegmentType",UsCaV1Field2.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",UsCaV1Field2.GPC="Gpc"})(UsCaV1Field||(UsCaV1Field={}));class UsCaV1 extends AbstractEncodableSegmentedBitStringSection{static ID=8;static VERSION=1;static NAME="uscav1";base64UrlEncoder=new CompressedBase64UrlEncoder;constructor(encodedString){let fields=new Map;fields.set(UsCaV1Field.VERSION.toString(),new EncodableFixedInteger(6,UsCaV1.VERSION)),fields.set(UsCaV1Field.SALE_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCaV1Field.SHARING_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCaV1Field.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCaV1Field.SALE_OPT_OUT.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCaV1Field.SHARING_OPT_OUT.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCaV1Field.SENSITIVE_DATA_PROCESSING.toString(),new EncodableFixedIntegerList(2,[0,0,0,0,0,0,0,0,0])),fields.set(UsCaV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new EncodableFixedIntegerList(2,[0,0])),fields.set(UsCaV1Field.PERSONAL_DATA_CONSENTS.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCaV1Field.MSPA_COVERED_TRANSACTION.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCaV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCaV1Field.MSPA_SERVICE_PROVIDER_MODE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCaV1Field.GPC_SEGMENT_TYPE.toString(),new EncodableFixedInteger(2,1)),fields.set(UsCaV1Field.GPC_SEGMENT_INCLUDED.toString(),new EncodableBoolean(!0)),fields.set(UsCaV1Field.GPC.toString(),new EncodableBoolean(!1));let coreSegment=[UsCaV1Field.VERSION.toString(),UsCaV1Field.SALE_OPT_OUT_NOTICE.toString(),UsCaV1Field.SHARING_OPT_OUT_NOTICE.toString(),UsCaV1Field.SENSITIVE_DATA_LIMIT_USE_NOTICE.toString(),UsCaV1Field.SALE_OPT_OUT.toString(),UsCaV1Field.SHARING_OPT_OUT.toString(),UsCaV1Field.SENSITIVE_DATA_PROCESSING.toString(),UsCaV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),UsCaV1Field.PERSONAL_DATA_CONSENTS.toString(),UsCaV1Field.MSPA_COVERED_TRANSACTION.toString(),UsCaV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),UsCaV1Field.MSPA_SERVICE_PROVIDER_MODE.toString()],gpcSegment=[UsCaV1Field.GPC_SEGMENT_TYPE.toString(),UsCaV1Field.GPC.toString()],segments=[coreSegment,gpcSegment];super(fields,segments);if(encodedString&&encodedString.length>0)this.decode(encodedString)}encode(){let segmentBitStrings=this.encodeSegmentsToBitStrings(),encodedSegments=[];if(encodedSegments.push(this.base64UrlEncoder.encode(segmentBitStrings[0])),segmentBitStrings[1]&&segmentBitStrings[1].length>0){if(this.fields.get(UsCaV1Field.GPC_SEGMENT_INCLUDED).getValue()===!0)encodedSegments.push(this.base64UrlEncoder.encode(segmentBitStrings[1]))}return encodedSegments.join(".")}decode(encodedSection){let encodedSegments=encodedSection.split("."),segmentBitStrings=[],gpcSegmentIncluded=!1;for(let i=0;i<encodedSegments.length;i++){let segmentBitString=this.base64UrlEncoder.decode(encodedSegments[i]);switch(segmentBitString.substring(0,2)){case"00":{segmentBitStrings[0]=segmentBitString;break}case"01":{gpcSegmentIncluded=!0,segmentBitStrings[1]=segmentBitString;break}default:throw new DecodingError("Unable to decode segment '"+encodedSegments[i]+"'")}}this.decodeSegmentsFromBitStrings(segmentBitStrings),this.fields.get(UsCaV1Field.GPC_SEGMENT_INCLUDED).setValue(gpcSegmentIncluded)}getId(){return UsCaV1.ID}getName(){return UsCaV1.NAME}}var UsVaV1Field;(function(UsVaV1Field2){UsVaV1Field2.VERSION="Version",UsVaV1Field2.SHARING_NOTICE="SharingNotice",UsVaV1Field2.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",UsVaV1Field2.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",UsVaV1Field2.SALE_OPT_OUT="SaleOptOut",UsVaV1Field2.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",UsVaV1Field2.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",UsVaV1Field2.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",UsVaV1Field2.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",UsVaV1Field2.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",UsVaV1Field2.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode"})(UsVaV1Field||(UsVaV1Field={}));class UsVaV1 extends AbstractEncodableBitStringSection{static ID=9;static VERSION=1;static NAME="usvav1";base64UrlEncoder=new CompressedBase64UrlEncoder;constructor(encodedString){let fields=new Map;fields.set(UsVaV1Field.VERSION.toString(),new EncodableFixedInteger(6,UsVaV1.VERSION)),fields.set(UsVaV1Field.SHARING_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsVaV1Field.SALE_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsVaV1Field.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsVaV1Field.SALE_OPT_OUT.toString(),new EncodableFixedInteger(2,0)),fields.set(UsVaV1Field.TARGETED_ADVERTISING_OPT_OUT.toString(),new EncodableFixedInteger(2,0)),fields.set(UsVaV1Field.SENSITIVE_DATA_PROCESSING.toString(),new EncodableFixedIntegerList(2,[0,0,0,0,0,0,0,0])),fields.set(UsVaV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new EncodableFixedInteger(2,0)),fields.set(UsVaV1Field.MSPA_COVERED_TRANSACTION.toString(),new EncodableFixedInteger(2,0)),fields.set(UsVaV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsVaV1Field.MSPA_SERVICE_PROVIDER_MODE.toString(),new EncodableFixedInteger(2,0));let fieldOrder=[UsVaV1Field.VERSION.toString(),UsVaV1Field.SHARING_NOTICE.toString(),UsVaV1Field.SALE_OPT_OUT_NOTICE.toString(),UsVaV1Field.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),UsVaV1Field.SALE_OPT_OUT.toString(),UsVaV1Field.TARGETED_ADVERTISING_OPT_OUT.toString(),UsVaV1Field.SENSITIVE_DATA_PROCESSING.toString(),UsVaV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),UsVaV1Field.MSPA_COVERED_TRANSACTION.toString(),UsVaV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),UsVaV1Field.MSPA_SERVICE_PROVIDER_MODE.toString()];super(fields,fieldOrder);if(encodedString&&encodedString.length>0)this.decode(encodedString)}encode(){return this.base64UrlEncoder.encode(this.encodeToBitString())}decode(bitString){this.decodeFromBitString(this.base64UrlEncoder.decode(bitString))}getId(){return UsVaV1.ID}getName(){return UsVaV1.NAME}}var UsCoV1Field;(function(UsCoV1Field2){UsCoV1Field2.VERSION="Version",UsCoV1Field2.SHARING_NOTICE="SharingNotice",UsCoV1Field2.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",UsCoV1Field2.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",UsCoV1Field2.SALE_OPT_OUT="SaleOptOut",UsCoV1Field2.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",UsCoV1Field2.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",UsCoV1Field2.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",UsCoV1Field2.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",UsCoV1Field2.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",UsCoV1Field2.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",UsCoV1Field2.GPC_SEGMENT_TYPE="GpcSegmentType",UsCoV1Field2.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",UsCoV1Field2.GPC="Gpc"})(UsCoV1Field||(UsCoV1Field={}));class UsCoV1 extends AbstractEncodableSegmentedBitStringSection{static ID=10;static VERSION=1;static NAME="uscov1";base64UrlEncoder=new CompressedBase64UrlEncoder;constructor(encodedString){let fields=new Map;fields.set(UsCoV1Field.VERSION.toString(),new EncodableFixedInteger(6,UsCoV1.VERSION)),fields.set(UsCoV1Field.SHARING_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCoV1Field.SALE_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCoV1Field.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCoV1Field.SALE_OPT_OUT.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCoV1Field.TARGETED_ADVERTISING_OPT_OUT.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCoV1Field.SENSITIVE_DATA_PROCESSING.toString(),new EncodableFixedIntegerList(2,[0,0,0,0,0,0,0])),fields.set(UsCoV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCoV1Field.MSPA_COVERED_TRANSACTION.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCoV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCoV1Field.MSPA_SERVICE_PROVIDER_MODE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCoV1Field.GPC_SEGMENT_TYPE.toString(),new EncodableFixedInteger(2,1)),fields.set(UsCoV1Field.GPC_SEGMENT_INCLUDED.toString(),new EncodableBoolean(!0)),fields.set(UsCoV1Field.GPC.toString(),new EncodableBoolean(!1));let coreSegment=[UsCoV1Field.VERSION.toString(),UsCoV1Field.SHARING_NOTICE.toString(),UsCoV1Field.SALE_OPT_OUT_NOTICE.toString(),UsCoV1Field.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),UsCoV1Field.SALE_OPT_OUT.toString(),UsCoV1Field.TARGETED_ADVERTISING_OPT_OUT.toString(),UsCoV1Field.SENSITIVE_DATA_PROCESSING.toString(),UsCoV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),UsCoV1Field.MSPA_COVERED_TRANSACTION.toString(),UsCoV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),UsCoV1Field.MSPA_SERVICE_PROVIDER_MODE.toString()],gpcSegment=[UsCoV1Field.GPC_SEGMENT_TYPE.toString(),UsCoV1Field.GPC.toString()],segments=[coreSegment,gpcSegment];super(fields,segments);if(encodedString&&encodedString.length>0)this.decode(encodedString)}encode(){let segmentBitStrings=this.encodeSegmentsToBitStrings(),encodedSegments=[];if(encodedSegments.push(this.base64UrlEncoder.encode(segmentBitStrings[0])),segmentBitStrings[1]&&segmentBitStrings[1].length>0){if(this.fields.get(UsCoV1Field.GPC_SEGMENT_INCLUDED).getValue()===!0)encodedSegments.push(this.base64UrlEncoder.encode(segmentBitStrings[1]))}return encodedSegments.join(".")}decode(encodedSection){let encodedSegments=encodedSection.split("."),segmentBitStrings=[],gpcSegmentIncluded=!1;for(let i=0;i<encodedSegments.length;i++){let segmentBitString=this.base64UrlEncoder.decode(encodedSegments[i]);switch(segmentBitString.substring(0,2)){case"00":{segmentBitStrings[0]=segmentBitString;break}case"01":{gpcSegmentIncluded=!0,segmentBitStrings[1]=segmentBitString;break}default:throw new DecodingError("Unable to decode segment '"+encodedSegments[i]+"'")}}this.decodeSegmentsFromBitStrings(segmentBitStrings),this.fields.get(UsCoV1Field.GPC_SEGMENT_INCLUDED).setValue(gpcSegmentIncluded)}getId(){return UsCoV1.ID}getName(){return UsCoV1.NAME}}var UsUtV1Field;(function(UsUtV1Field2){UsUtV1Field2.VERSION="Version",UsUtV1Field2.SHARING_NOTICE="SharingNotice",UsUtV1Field2.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",UsUtV1Field2.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",UsUtV1Field2.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE="SensitiveDataProcessingOptOutNotice",UsUtV1Field2.SALE_OPT_OUT="SaleOptOut",UsUtV1Field2.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",UsUtV1Field2.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",UsUtV1Field2.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",UsUtV1Field2.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",UsUtV1Field2.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",UsUtV1Field2.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode"})(UsUtV1Field||(UsUtV1Field={}));class UsUtV1 extends AbstractEncodableBitStringSection{static ID=11;static VERSION=1;static NAME="usutv1";base64UrlEncoder=new CompressedBase64UrlEncoder;constructor(encodedString){let fields=new Map;fields.set(UsUtV1Field.VERSION.toString(),new EncodableFixedInteger(6,UsUtV1.VERSION)),fields.set(UsUtV1Field.SHARING_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsUtV1Field.SALE_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsUtV1Field.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsUtV1Field.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsUtV1Field.SALE_OPT_OUT.toString(),new EncodableFixedInteger(2,0)),fields.set(UsUtV1Field.TARGETED_ADVERTISING_OPT_OUT.toString(),new EncodableFixedInteger(2,0)),fields.set(UsUtV1Field.SENSITIVE_DATA_PROCESSING.toString(),new EncodableFixedIntegerList(2,[0,0,0,0,0,0,0,0])),fields.set(UsUtV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new EncodableFixedInteger(2,0)),fields.set(UsUtV1Field.MSPA_COVERED_TRANSACTION.toString(),new EncodableFixedInteger(2,0)),fields.set(UsUtV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsUtV1Field.MSPA_SERVICE_PROVIDER_MODE.toString(),new EncodableFixedInteger(2,0));let fieldOrder=[UsUtV1Field.VERSION.toString(),UsUtV1Field.SHARING_NOTICE.toString(),UsUtV1Field.SALE_OPT_OUT_NOTICE.toString(),UsUtV1Field.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),UsUtV1Field.SENSITIVE_DATA_PROCESSING_OPT_OUT_NOTICE.toString(),UsUtV1Field.SALE_OPT_OUT.toString(),UsUtV1Field.TARGETED_ADVERTISING_OPT_OUT.toString(),UsUtV1Field.SENSITIVE_DATA_PROCESSING.toString(),UsUtV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),UsUtV1Field.MSPA_COVERED_TRANSACTION.toString(),UsUtV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),UsUtV1Field.MSPA_SERVICE_PROVIDER_MODE.toString()];super(fields,fieldOrder);if(encodedString&&encodedString.length>0)this.decode(encodedString)}encode(){return this.base64UrlEncoder.encode(this.encodeToBitString())}decode(bitString){this.decodeFromBitString(this.base64UrlEncoder.decode(bitString))}getId(){return UsUtV1.ID}getName(){return UsUtV1.NAME}}var UsCtV1Field;(function(UsCtV1Field2){UsCtV1Field2.VERSION="Version",UsCtV1Field2.SHARING_NOTICE="SharingNotice",UsCtV1Field2.SALE_OPT_OUT_NOTICE="SaleOptOutNotice",UsCtV1Field2.TARGETED_ADVERTISING_OPT_OUT_NOTICE="TargetedAdvertisingOptOutNotice",UsCtV1Field2.SALE_OPT_OUT="SaleOptOut",UsCtV1Field2.TARGETED_ADVERTISING_OPT_OUT="TargetedAdvertisingOptOut",UsCtV1Field2.SENSITIVE_DATA_PROCESSING="SensitiveDataProcessing",UsCtV1Field2.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS="KnownChildSensitiveDataConsents",UsCtV1Field2.MSPA_COVERED_TRANSACTION="MspaCoveredTransaction",UsCtV1Field2.MSPA_OPT_OUT_OPTION_MODE="MspaOptOutOptionMode",UsCtV1Field2.MSPA_SERVICE_PROVIDER_MODE="MspaServiceProviderMode",UsCtV1Field2.GPC_SEGMENT_TYPE="GpcSegmentType",UsCtV1Field2.GPC_SEGMENT_INCLUDED="GpcSegmentIncluded",UsCtV1Field2.GPC="Gpc"})(UsCtV1Field||(UsCtV1Field={}));class UsCtV1 extends AbstractEncodableSegmentedBitStringSection{static ID=12;static VERSION=1;static NAME="usctv1";base64UrlEncoder=new CompressedBase64UrlEncoder;constructor(encodedString){let fields=new Map;fields.set(UsCtV1Field.VERSION.toString(),new EncodableFixedInteger(6,UsCtV1.VERSION)),fields.set(UsCtV1Field.SHARING_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCtV1Field.SALE_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCtV1Field.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCtV1Field.SALE_OPT_OUT.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCtV1Field.TARGETED_ADVERTISING_OPT_OUT.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCtV1Field.SENSITIVE_DATA_PROCESSING.toString(),new EncodableFixedIntegerList(2,[0,0,0,0,0,0,0,0])),fields.set(UsCtV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),new EncodableFixedIntegerList(2,[0,0,0])),fields.set(UsCtV1Field.MSPA_COVERED_TRANSACTION.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCtV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCtV1Field.MSPA_SERVICE_PROVIDER_MODE.toString(),new EncodableFixedInteger(2,0)),fields.set(UsCtV1Field.GPC_SEGMENT_TYPE.toString(),new EncodableFixedInteger(2,1)),fields.set(UsCtV1Field.GPC_SEGMENT_INCLUDED.toString(),new EncodableBoolean(!0)),fields.set(UsCtV1Field.GPC.toString(),new EncodableBoolean(!1));let coreSegment=[UsCtV1Field.VERSION.toString(),UsCtV1Field.SHARING_NOTICE.toString(),UsCtV1Field.SALE_OPT_OUT_NOTICE.toString(),UsCtV1Field.TARGETED_ADVERTISING_OPT_OUT_NOTICE.toString(),UsCtV1Field.SALE_OPT_OUT.toString(),UsCtV1Field.TARGETED_ADVERTISING_OPT_OUT.toString(),UsCtV1Field.SENSITIVE_DATA_PROCESSING.toString(),UsCtV1Field.KNOWN_CHILD_SENSITIVE_DATA_CONSENTS.toString(),UsCtV1Field.MSPA_COVERED_TRANSACTION.toString(),UsCtV1Field.MSPA_OPT_OUT_OPTION_MODE.toString(),UsCtV1Field.MSPA_SERVICE_PROVIDER_MODE.toString()],gpcSegment=[UsCtV1Field.GPC_SEGMENT_TYPE.toString(),UsCtV1Field.GPC.toString()],segments=[coreSegment,gpcSegment];super(fields,segments);if(encodedString&&encodedString.length>0)this.decode(encodedString)}encode(){let segmentBitStrings=this.encodeSegmentsToBitStrings(),encodedSegments=[];if(encodedSegments.push(this.base64UrlEncoder.encode(segmentBitStrings[0])),segmentBitStrings[1]&&segmentBitStrings[1].length>0){if(this.fields.get(UsCtV1Field.GPC_SEGMENT_INCLUDED).getValue()===!0)encodedSegments.push(this.base64UrlEncoder.encode(segmentBitStrings[1]))}return encodedSegments.join(".")}decode(encodedSection){let encodedSegments=encodedSection.split("."),segmentBitStrings=[],gpcSegmentIncluded=!1;for(let i=0;i<encodedSegments.length;i++){let segmentBitString=this.base64UrlEncoder.decode(encodedSegments[i]);switch(segmentBitString.substring(0,2)){case"00":{segmentBitStrings[0]=segmentBitString;break}case"01":{gpcSegmentIncluded=!0,segmentBitStrings[1]=segmentBitString;break}default:throw new DecodingError("Unable to decode segment '"+encodedSegments[i]+"'")}}this.decodeSegmentsFromBitStrings(segmentBitStrings),this.fields.get(UsCtV1Field.GPC_SEGMENT_INCLUDED).setValue(gpcSegmentIncluded)}getId(){return UsCtV1.ID}getName(){return UsCtV1.NAME}}class Sections{static SECTION_ID_NAME_MAP=new Map([[TcfEuV2.ID,TcfEuV2.NAME],[TcfCaV1.ID,TcfCaV1.NAME],[UspV1.ID,UspV1.NAME],[UsNatV1.ID,UsNatV1.NAME],[UsCaV1.ID,UsCaV1.NAME],[UsVaV1.ID,UsVaV1.NAME],[UsCoV1.ID,UsCoV1.NAME],[UsUtV1.ID,UsUtV1.NAME],[UsCtV1.ID,UsCtV1.NAME]]);static SECTION_ORDER=[TcfEuV2.NAME,TcfCaV1.NAME,UspV1.NAME,UsNatV1.NAME,UsCaV1.NAME,UsVaV1.NAME,UsCoV1.NAME,UsUtV1.NAME,UsCtV1.NAME]}class LazyDecodingError extends DecodingError{constructor(msg){super(msg);this.name="LazyDecodingError"}}class GppModel{sections=new Map;encodedString;decoded;dirty;constructor(encodedString){if(encodedString)this.encodedString=encodedString,this.decoded=!1,this.dirty=!1;else this.encodedString="DBAA",this.decoded=!1,this.dirty=!1}setFieldValue(sectionName,fieldName,value){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(e){throw new LazyDecodingError(e.message)}let section=null;if(!this.sections.has(sectionName)){if(sectionName===TcfCaV1.NAME)section=new TcfCaV1,this.sections.set(TcfCaV1.NAME,section);else if(sectionName===TcfEuV2.NAME)section=new TcfEuV2,this.sections.set(TcfEuV2.NAME,section);else if(sectionName===UspV1.NAME)section=new UspV1,this.sections.set(UspV1.NAME,section);else if(sectionName===UsNatV1.NAME)section=new UsNatV1,this.sections.set(UsNatV1.NAME,section);else if(sectionName===UsCaV1.NAME)section=new UsCaV1,this.sections.set(UsCaV1.NAME,section);else if(sectionName===UsVaV1.NAME)section=new UsVaV1,this.sections.set(UsVaV1.NAME,section);else if(sectionName===UsCoV1.NAME)section=new UsCoV1,this.sections.set(UsCoV1.NAME,section);else if(sectionName===UsUtV1.NAME)section=new UsUtV1,this.sections.set(UsUtV1.NAME,section);else if(sectionName===UsCtV1.NAME)section=new UsCtV1,this.sections.set(UsCtV1.NAME,section)}else section=this.sections.get(sectionName);if(section)section.setFieldValue(fieldName,value),this.dirty=!0;else throw new InvalidFieldError(sectionName+"."+fieldName+" not found")}setFieldValueBySectionId(sectionId,fieldName,value){this.setFieldValue(Sections.SECTION_ID_NAME_MAP.get(sectionId),fieldName,value)}getFieldValue(sectionName,fieldName){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(e){throw new LazyDecodingError(e.message)}if(this.sections.has(sectionName))return this.sections.get(sectionName).getFieldValue(fieldName);else return null}getFieldValueBySectionId(sectionId,fieldName){return this.getFieldValue(Sections.SECTION_ID_NAME_MAP.get(sectionId),fieldName)}hasField(sectionName,fieldName){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(e){throw new LazyDecodingError(e.message)}if(this.sections.has(sectionName))return this.sections.get(sectionName).hasField(fieldName);else return!1}hasFieldBySectionId(sectionId,fieldName){return this.hasField(Sections.SECTION_ID_NAME_MAP.get(sectionId),fieldName)}hasSection(sectionName){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(e){throw new LazyDecodingError(e.message)}return this.sections.has(sectionName)}hasSectionId(sectionId){return this.hasSection(Sections.SECTION_ID_NAME_MAP.get(sectionId))}deleteSection(sectionName){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(e){throw new LazyDecodingError(e.message)}this.sections.delete(sectionName),this.dirty=!0}deleteSectionById(sectionId){this.deleteSection(Sections.SECTION_ID_NAME_MAP.get(sectionId))}clear(){this.sections.clear(),this.encodedString="DBAA",this.decoded=!1,this.dirty=!1}getHeader(){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(e){throw new LazyDecodingError(e.message)}let header=new HeaderV1;return header.setFieldValue("SectionIds",this.getSectionIds()),header.toObj()}getSection(sectionName){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(e){throw new LazyDecodingError(e.message)}if(this.sections.has(sectionName))return this.sections.get(sectionName).toObj();else return null}getSectionIds(){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(e){throw new LazyDecodingError(e.message)}let sectionIds=[];for(let i=0;i<Sections.SECTION_ORDER.length;i++){let sectionName=Sections.SECTION_ORDER[i];if(this.sections.has(sectionName)){let section=this.sections.get(sectionName);sectionIds.push(section.getId())}}return sectionIds}encode(){if(!this.dirty)return this.encodedString;if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(e){throw new LazyDecodingError(e.message)}let encodedSections=[],sectionIds=[];for(let i=0;i<Sections.SECTION_ORDER.length;i++){let sectionName=Sections.SECTION_ORDER[i];if(this.sections.has(sectionName)){let section=this.sections.get(sectionName);encodedSections.push(section.encode()),sectionIds.push(section.getId())}}let header=new HeaderV1;return header.setFieldValue("SectionIds",this.getSectionIds()),encodedSections.unshift(header.encode()),this.encodedString=encodedSections.join("~"),this.dirty=!1,this.encodedString}decode(str){this.encodedString=str,this.decoded=!1,this.dirty=!0,this.sections.clear();let encodedSections=str.split("~"),header=new HeaderV1(encodedSections[0]);this.sections.set(HeaderV1.NAME,header);let sectionIds=header.getFieldValue("SectionIds");for(let i=0;i<sectionIds.length;i++)if(sectionIds[i]===TcfCaV1.ID){let section=new TcfCaV1(encodedSections[i+1]);this.sections.set(TcfCaV1.NAME,section)}else if(sectionIds[i]===TcfEuV2.ID){let section=new TcfEuV2(encodedSections[i+1]);this.sections.set(TcfEuV2.NAME,section)}else if(sectionIds[i]===UspV1.ID){let section=new UspV1(encodedSections[i+1]);this.sections.set(UspV1.NAME,section)}else if(sectionIds[i]===UsNatV1.ID){let section=new UsNatV1(encodedSections[i+1]);this.sections.set(UsNatV1.NAME,section)}else if(sectionIds[i]===UsCaV1.ID){let section=new UsCaV1(encodedSections[i+1]);this.sections.set(UsCaV1.NAME,section)}else if(sectionIds[i]===UsVaV1.ID){let section=new UsVaV1(encodedSections[i+1]);this.sections.set(UsVaV1.NAME,section)}else if(sectionIds[i]===UsCoV1.ID){let section=new UsCoV1(encodedSections[i+1]);this.sections.set(UsCoV1.NAME,section)}else if(sectionIds[i]===UsUtV1.ID){let section=new UsUtV1(encodedSections[i+1]);this.sections.set(UsUtV1.NAME,section)}else if(sectionIds[i]===UsCtV1.ID){let section=new UsCtV1(encodedSections[i+1]);this.sections.set(UsCtV1.NAME,section)}this.decoded=!0,this.dirty=!1}encodeSection(sectionName){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(e){throw new LazyDecodingError(e.message)}if(this.sections.has(sectionName))return this.sections.get(sectionName).encode();else return null}encodeSectionById(sectionId){return this.encodeSection(Sections.SECTION_ID_NAME_MAP.get(sectionId))}decodeSection(sectionName,encodedString){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(e){throw new LazyDecodingError(e.message)}let section=null;if(!this.sections.has(sectionName)){if(sectionName===TcfCaV1.NAME)section=new TcfCaV1,this.sections.set(TcfCaV1.NAME,section);else if(sectionName===TcfEuV2.NAME)section=new TcfEuV2,this.sections.set(TcfEuV2.NAME,section);else if(sectionName===UspV1.NAME)section=new UspV1,this.sections.set(UspV1.NAME,section);else if(sectionName===UsNatV1.NAME)section=new UsNatV1,this.sections.set(UsNatV1.NAME,section);else if(sectionName===UsCaV1.NAME)section=new UsCaV1,this.sections.set(UsCaV1.NAME,section);else if(sectionName===UsVaV1.NAME)section=new UsVaV1,this.sections.set(UsVaV1.NAME,section);else if(sectionName===UsCoV1.NAME)section=new UsCoV1,this.sections.set(UsCoV1.NAME,section);else if(sectionName===UsUtV1.NAME)section=new UsUtV1,this.sections.set(UsUtV1.NAME,section);else if(sectionName===UsCtV1.NAME)section=new UsCtV1,this.sections.set(UsCtV1.NAME,section)}else section=this.sections.get(sectionName);if(section)section.decode(encodedString)}decodeSectionById(sectionId,encodedString){this.decodeSection(Sections.SECTION_ID_NAME_MAP.get(sectionId),encodedString)}toObject(){if(!this.decoded&&this.encodedString!=null&&this.encodedString.length>0)try{this.decode(this.encodedString)}catch(e){throw new LazyDecodingError(e.message)}let obj={};for(let i=0;i<Sections.SECTION_ORDER.length;i++){let sectionName=Sections.SECTION_ORDER[i];if(this.sections.has(sectionName))obj[sectionName]=this.sections.get(sectionName).toObj()}return obj}}class CmpApiContext{gppVersion="1.1";supportedAPIs=[];eventQueue=new EventListenerQueue(this);cmpStatus=CmpStatus.LOADING;cmpDisplayStatus=CmpDisplayStatus.HIDDEN;signalStatus=SignalStatus.NOT_READY;applicableSections=[];gppModel=new GppModel;cmpId;cmpVersion;eventStatus;reset(){this.eventQueue.clear(),this.cmpStatus=CmpStatus.LOADING,this.cmpDisplayStatus=CmpDisplayStatus.HIDDEN,this.signalStatus=SignalStatus.NOT_READY,this.applicableSections=[],this.supportedAPIs=[],this.gppModel=new GppModel,delete this.cmpId,delete this.cmpVersion,delete this.eventStatus}}class JsonHttpClient{static absCall(url,body,sendCookies,timeout){return new Promise((resolve,reject)=>{const req=new XMLHttpRequest,onLoad=()=>{if(req.readyState==XMLHttpRequest.DONE)if(req.status>=200&&req.status<300){let response=req.response;if(typeof response==="string")try{response=JSON.parse(response)}catch(e){}resolve(response)}else reject(new Error(`HTTP Status: ${req.status} response type: ${req.responseType}`))},onError=()=>{reject(new Error("error"))},onAbort=()=>{reject(new Error("aborted"))},onTimeout=()=>{reject(new Error("Timeout "+timeout+"ms "+url))};if(req.withCredentials=sendCookies,req.addEventListener("load",onLoad),req.addEventListener("error",onError),req.addEventListener("abort",onAbort),body===null)req.open("GET",url,!0);else req.open("POST",url,!0);req.responseType="json",req.timeout=timeout,req.ontimeout=onTimeout,req.send(body)})}static post(url,body,sendCookies=!1,timeout=0){return this.absCall(url,JSON.stringify(body),sendCookies,timeout)}static fetch(url,sendCookies=!1,timeout=0){return this.absCall(url,null,sendCookies,timeout)}}class GVLError extends Error{constructor(msg){super(msg);this.name="GVLError"}}class ConsentLanguages{static langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]);has(key){return ConsentLanguages.langSet.has(key)}forEach(callback){ConsentLanguages.langSet.forEach(callback)}get size(){return ConsentLanguages.langSet.size}}class GVL{vendors;static DEFAULT_LANGUAGE="EN";consentLanguages=new ConsentLanguages;gvlSpecificationVersion;vendorListVersion;tcfPolicyVersion;lastUpdated;purposes;specialPurposes;features;specialFeatures;stacks;dataCategories;language=GVL.DEFAULT_LANGUAGE;vendorIds;ready=!1;fullVendorList;byPurposeVendorMap;bySpecialPurposeVendorMap;byFeatureVendorMap;bySpecialFeatureVendorMap;baseUrl;languageFilename="purposes-[LANG].json";static fromVendorList(vendorList){let gvl=new GVL;return gvl.populate(vendorList),gvl}static async fromUrl(config){let baseUrl=config.baseUrl;if(!baseUrl||baseUrl.length===0)throw new GVLError("Invalid baseUrl: '"+baseUrl+"'");if(/^https?:\/\/vendorlist\.consensu\.org\//.test(baseUrl))throw new GVLError("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");if(baseUrl.length>0&&baseUrl[baseUrl.length-1]!=="/")baseUrl+="/";let gvl=new GVL;if(gvl.baseUrl=baseUrl,config.languageFilename)gvl.languageFilename=config.languageFilename;else gvl.languageFilename="purposes-[LANG].json";if(config.version>0){let versionedFilename=config.versionedFilename;if(!versionedFilename)versionedFilename="archives/vendor-list-v[VERSION].json";let url=baseUrl+versionedFilename.replace("[VERSION]",String(config.version));gvl.populate(await JsonHttpClient.fetch(url))}else{let latestFilename=config.latestFilename;if(!latestFilename)latestFilename="vendor-list.json";let url=baseUrl+latestFilename;gvl.populate(await JsonHttpClient.fetch(url))}return gvl}async changeLanguage(lang){const langUpper=lang.toUpperCase();if(this.consentLanguages.has(langUpper)){if(langUpper!==this.language){this.language=langUpper;const url=this.baseUrl+this.languageFilename.replace("[LANG]",lang);try{this.populate(await JsonHttpClient.fetch(url))}catch(err){throw new GVLError("unable to load language: "+err.message)}}}else throw new GVLError(`unsupported language ${lang}`)}getJson(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,dataCategories:this.dataCategories,vendors:this.fullVendorList}))}isVendorList(gvlObject){return gvlObject!==void 0&&gvlObject.vendors!==void 0}populate(gvlObject){if(this.purposes=gvlObject.purposes,this.specialPurposes=gvlObject.specialPurposes,this.features=gvlObject.features,this.specialFeatures=gvlObject.specialFeatures,this.stacks=gvlObject.stacks,this.dataCategories=gvlObject.dataCategories,this.isVendorList(gvlObject)){if(this.gvlSpecificationVersion=gvlObject.gvlSpecificationVersion,this.tcfPolicyVersion=gvlObject.tcfPolicyVersion,this.vendorListVersion=gvlObject.vendorListVersion,this.lastUpdated=gvlObject.lastUpdated,typeof this.lastUpdated==="string")this.lastUpdated=new Date(this.lastUpdated);this.vendors=gvlObject.vendors,this.fullVendorList=gvlObject.vendors,this.mapVendors(),this.ready=!0}}mapVendors(vendorIds){if(this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((purposeId)=>{this.byPurposeVendorMap[purposeId]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach((purposeId)=>{this.bySpecialPurposeVendorMap[purposeId]=new Set}),Object.keys(this.features).forEach((featureId)=>{this.byFeatureVendorMap[featureId]=new Set}),Object.keys(this.specialFeatures).forEach((featureId)=>{this.bySpecialFeatureVendorMap[featureId]=new Set}),!Array.isArray(vendorIds))vendorIds=Object.keys(this.fullVendorList).map((vId)=>+vId);this.vendorIds=new Set(vendorIds),this.vendors=vendorIds.reduce((vendors,vendorId)=>{const vendor=this.vendors[String(vendorId)];if(vendor&&vendor.deletedDate===void 0){if(vendor.purposes.forEach((purposeId)=>{this.byPurposeVendorMap[String(purposeId)].consent.add(vendorId)}),vendor.specialPurposes.forEach((purposeId)=>{this.bySpecialPurposeVendorMap[String(purposeId)].add(vendorId)}),vendor.legIntPurposes.forEach((purposeId)=>{this.byPurposeVendorMap[String(purposeId)].legInt.add(vendorId)}),vendor.flexiblePurposes)vendor.flexiblePurposes.forEach((purposeId)=>{this.byPurposeVendorMap[String(purposeId)].flexible.add(vendorId)});vendor.features.forEach((featureId)=>{this.byFeatureVendorMap[String(featureId)].add(vendorId)}),vendor.specialFeatures.forEach((featureId)=>{this.bySpecialFeatureVendorMap[String(featureId)].add(vendorId)}),vendors[vendorId]=vendor}return vendors},{})}getFilteredVendors(purposeOrFeature,id,subType,special){const properPurposeOrFeature=purposeOrFeature.charAt(0).toUpperCase()+purposeOrFeature.slice(1);let vendorSet;const retr={};if(purposeOrFeature==="purpose"&&subType)vendorSet=this["by"+properPurposeOrFeature+"VendorMap"][String(id)][subType];else vendorSet=this["by"+(special?"Special":"")+properPurposeOrFeature+"VendorMap"][String(id)];return vendorSet.forEach((vendorId)=>{retr[String(vendorId)]=this.vendors[String(vendorId)]}),retr}getVendorsWithConsentPurpose(purposeId){return this.getFilteredVendors("purpose",purposeId,"consent")}getVendorsWithLegIntPurpose(purposeId){return this.getFilteredVendors("purpose",purposeId,"legInt")}getVendorsWithFlexiblePurpose(purposeId){return this.getFilteredVendors("purpose",purposeId,"flexible")}getVendorsWithSpecialPurpose(specialPurposeId){return this.getFilteredVendors("purpose",specialPurposeId,void 0,!0)}getVendorsWithFeature(featureId){return this.getFilteredVendors("feature",featureId)}getVendorsWithSpecialFeature(specialFeatureId){return this.getFilteredVendors("feature",specialFeatureId,void 0,!0)}narrowVendorsTo(vendorIds){this.mapVendors(vendorIds)}get isReady(){return this.ready}static isInstanceOf(questionableInstance){return typeof questionableInstance==="object"&&typeof questionableInstance.narrowVendorsTo==="function"}}class CmpApi{callResponder;cmpApiContext;constructor(cmpId,cmpVersion,customCommands){this.cmpApiContext=new CmpApiContext,this.cmpApiContext.cmpId=cmpId,this.cmpApiContext.cmpVersion=cmpVersion,this.callResponder=new CallResponder(this.cmpApiContext,customCommands)}fireEvent(eventName,value){this.cmpApiContext.eventQueue.exec(eventName,value)}fireErrorEvent(value){this.cmpApiContext.eventQueue.exec("error",value)}fireSectionChange(value){this.cmpApiContext.eventQueue.exec("sectionChange",value)}getEventStatus(){return this.cmpApiContext.eventStatus}setEventStatus(eventStatus){this.cmpApiContext.eventStatus=eventStatus}getCmpStatus(){return this.cmpApiContext.cmpStatus}setCmpStatus(cmpStatus){this.cmpApiContext.cmpStatus=cmpStatus,this.cmpApiContext.eventQueue.exec("cmpStatus",cmpStatus)}getCmpDisplayStatus(){return this.cmpApiContext.cmpDisplayStatus}setCmpDisplayStatus(cmpDisplayStatus){this.cmpApiContext.cmpDisplayStatus=cmpDisplayStatus,this.cmpApiContext.eventQueue.exec("cmpDisplayStatus",cmpDisplayStatus)}getSignalStatus(){return this.cmpApiContext.signalStatus}setSignalStatus(signalStatus){this.cmpApiContext.signalStatus=signalStatus,this.cmpApiContext.eventQueue.exec("signalStatus",signalStatus)}getApplicableSections(){return this.cmpApiContext.applicableSections}setApplicableSections(applicableSections){this.cmpApiContext.applicableSections=applicableSections}getSupportedAPIs(){return this.cmpApiContext.supportedAPIs}setSupportedAPIs(supportedAPIs){this.cmpApiContext.supportedAPIs=supportedAPIs}setGppString(encodedGppString){this.cmpApiContext.gppModel.decode(encodedGppString)}getGppString(){return this.cmpApiContext.gppModel.encode()}setSectionString(sectionName,encodedSectionString){this.cmpApiContext.gppModel.decodeSection(sectionName,encodedSectionString)}setSectionStringById(sectionId,encodedSectionString){this.setSectionString(Sections.SECTION_ID_NAME_MAP.get(sectionId),encodedSectionString)}getSectionString(sectionName){return this.cmpApiContext.gppModel.encodeSection(sectionName)}getSectionStringById(sectionId){return this.getSectionString(Sections.SECTION_ID_NAME_MAP.get(sectionId))}setFieldValue(sectionName,fieldName,value){this.cmpApiContext.gppModel.setFieldValue(sectionName,fieldName,value)}setFieldValueBySectionId(sectionId,fieldName,value){this.setFieldValue(Sections.SECTION_ID_NAME_MAP.get(sectionId),fieldName,value)}getFieldValue(sectionName,fieldName){return this.cmpApiContext.gppModel.getFieldValue(sectionName,fieldName)}getFieldValueBySectionId(sectionId,fieldName){return this.getFieldValue(Sections.SECTION_ID_NAME_MAP.get(sectionId),fieldName)}getSection(sectionName){return this.cmpApiContext.gppModel.getSection(sectionName)}getSectionById(sectionId){return this.getSection(Sections.SECTION_ID_NAME_MAP.get(sectionId))}hasSection(sectionName){return this.cmpApiContext.gppModel.hasSection(sectionName)}hasSectionId(sectionId){return this.hasSection(Sections.SECTION_ID_NAME_MAP.get(sectionId))}deleteSection(sectionName){this.cmpApiContext.gppModel.deleteSection(sectionName)}deleteSectionById(sectionId){this.deleteSection(Sections.SECTION_ID_NAME_MAP.get(sectionId))}clear(){this.cmpApiContext.gppModel.clear()}getObject(){return this.cmpApiContext.gppModel.toObject()}getGvlFromVendorList(vendorList){return GVL.fromVendorList(vendorList)}async getGvlFromUrl(gvlUrlConfig){return GVL.fromUrl(gvlUrlConfig)}}(function(){const cmp=new CmpApi(-1,1);cmp.setSignalStatus(SignalStatus.NOT_READY),cmp.setCmpStatus(CmpStatus.LOADED),cmp.setCmpDisplayStatus(CmpDisplayStatus.DISABLED),cmp.setSignalStatus(SignalStatus.READY)})();}catch(err){var hREED=function(er){return function(){reportEzError(er,"/ccpa/v2/ccpaplus.js")}};typeof reportEzError==="function"?hREED(err):window.addEventListener('reportEzErrorDefined',hREED(err),{once:true});console.error(err);}
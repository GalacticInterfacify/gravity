"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[9359],{37170:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(87363),i=a.n(r),s=a(86976);const n=(0,s.Z)({resolved:{},chunkName:()=>"PlaySimilarGames.component.async",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(6122),a.e(6855)]).then(a.bind(a,75986)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 75986}},{}),l=n},93175:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var r=a(87363),i=a.n(r),s=a(29994),n=a(4463),l=a(77123),o=a(45331),c=a(78740),m=a(17238),u=a(53604),p=a(85467),d=a(33119),g=a(5825),f=a(17061),v=a(47484),y=a(15771),b=a(4230),h=a(37170),_=Object.defineProperty,E=Object.defineProperties,O=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,S=(e,t,a)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const A=(0,s.$j)((function(e){return{isDev:e.isDev,isSimilarGamesLoading:e.similarGamesLoading,isFullscreenActive:e.ui.isFullscreenActive}}),(function(e){return(0,l.DE)({loadSimilarGames:d.w1},e)}))((({appId:e,isFullscreenActive:t,isSimilarGamesLoading:a,isDev:s,loadSimilarGames:l,inGamePage:d,isBlackFadeout:_})=>{var A;const{isDistGame:D,isGamesApp:N,isWorldWide:I,lang:j,pfid:k,platform:L,playPageData:M,isSearchCrawler:x,similarGames:C,abt:{flags:F}}=(0,r.useContext)(o.Z),Z=(0,n.TH)(),[B,V]=(0,r.useState)(!1),[U,W]=(0,r.useState)(!1),[q,R]=(0,r.useState)(!1),T=(0,r.useRef)(!1),$=(0,p.T)(),H=(0,u.f)(),J=(0,g.C)((e=>e.similarGames||[])),K=(0,r.useMemo)((()=>x||!x&&d),[x,d]),{appId:X}=(0,r.useMemo)((()=>{var t;let a=null==(t=M.gameInfo)?void 0:t.appId;return void 0===M.gameInfo&&d&&void 0!==e&&(a=e),{appId:a}}),[M,d,e]);(null==C?void 0:C.length)&&(J[Number(X)]=C);const z=(0,r.useMemo)((()=>!U&&void 0===J[Number(X)]),[J,X,U]),Q=(0,r.useCallback)((()=>{R(!0)}),[]),Y=(0,b._Z)({appId:X,inGamePage:K&&d,hasMounted:H,showOnRedirectFromCatalog:(0,y.Fe)(F),isDistGame:D,search:Z.search});(0,r.useEffect)((()=>{(0,v.EE)((()=>{V(!0)}),d?3e3:void 0)}),[d]),(0,r.useEffect)((()=>{var e,t;if(B&&Y&&z){let a;s&&(a=(0,f.V)(c.Vs)||"",a=null!=(e=parseInt(a,10))?e:10),W(!0),l((t=((e,t)=>{for(var a in t||(t={}))w.call(t,a)&&S(e,a,t[a]);if(G)for(var a of G(t))P.call(t,a)&&S(e,a,t[a]);return e})({adjustGamesCount:b.kr.bind(null,a),appId:Number(X),int:I,lang:j},(0,y.B0)(F)?{pageType:"game"}:{}),E(t,O({pfid:k,platform:L,standalone:N}))))}}),[X,Y,F,s,N,I,j,l,k,L,B,z]),(0,r.useEffect)((()=>{U&&T.current&&!a&&W(!1),T.current!==a&&(T.current=a)}),[U,a,W]);const ee=(0,r.useMemo)((()=>(!H||!B||U)&&!t),[H,t,U,B]);return!Y||d&&!K?((0,b.ii)(),null):x&&d&&Y&&J&&(null==(A=Object.keys(J))?void 0:A.length)?i().createElement("section",{className:"game-page__similar"},i().createElement("span",{className:"similar__title"},$("similar.title-in-game-page")),i().createElement(h.Z,{inGamePage:d,isBlackFadeout:_})):!x&&K&&d?i().createElement("section",{className:"game-page__similar-in-game-page"},i().createElement("span",{className:"similar__title"},$("similar.title-in-game-page")),i().createElement("div",{className:"similar__container"},!q&&i().createElement(m.I,{inGamePage:d,visible:H}),!ee&&i().createElement(h.Z,{inGamePage:d,isBlackFadeout:_,onShow:Q}))):i().createElement(i().Fragment,null,!q&&i().createElement(m.I,{inGamePage:d,visible:H}),!ee&&i().createElement(h.Z,{inGamePage:d,isBlackFadeout:_,onShow:Q}))}))},78740:(e,t,a)=>{a.d(t,{Ek:()=>n,SA:()=>s,UG:()=>o,VM:()=>p,Vs:()=>c,_W:()=>u,b3:()=>r,cC:()=>m,gK:()=>i,lX:()=>l});const r="similar_games",i="game_promo_similar_games",s="play-similar-games",n="play-similar-games-stubs",l=107,o=20,c="similar_games_count",m="similar_games_proxy",u="yandexGames_similar_games_close",p="yandexGames_similar_games_close"},4230:(e,t,a)=>{a.d(t,{_Z:()=>G,ii:()=>w,kr:()=>O,xG:()=>E});var r=a(67748),i=a.n(r),s=a(34711),n=a(83242),l=a(35090),o=a(48810),c=a(78740),m=Object.defineProperty,u=Object.defineProperties,p=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,v=(e,t,a)=>t in e?m(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,y=(e,t)=>{for(var a in t||(t={}))g.call(t,a)&&v(e,a,t[a]);if(d)for(var a of d(t))f.call(t,a)&&v(e,a,t[a]);return e},b=(e,t)=>u(e,p(t));const h=e=>{let t;try{t=JSON.parse(e)}catch(e){t=[]}return Array.isArray(t)?t:[]},_=(e,t)=>{const a=Array.isArray(e)?e:h(e);t&&a.push(t),(0,o.Ur)(c.VM,JSON.stringify(a))};function E(e){const t=(0,o.dq)(c.VM);t.wasError||!t.value?(0,o.Ur)(c.VM,JSON.stringify([e])):_(t.value,e)}function O(e,t){return void 0===e||0===t.length?t:t.length>e?t=t.slice(0,e):(t.length<e&&(t=[...Array(Math.ceil(e/t.length))].reduce(((e,a,r)=>e.concat(t.map(((e,a)=>b(y({},e),{appID:e.appID+r,title:e.title+` (${r*t.length+a+1})`}))))),[]).slice(0,e)),t)}function G({appId:e,inGamePage:t,hasMounted:a,isDistGame:r,search:m,showOnRedirectFromCatalog:u}){if(r)return!1;const p=i().parse(m.slice(1));if("distrib"===p.utm_source||p.clid)return!1;if(t)return!0;if(!a)return!0;if((0,s.X)()||!u&&(0,l.Oo)())return!1;const d=(0,n.e)(c._W);if(d){const t=h(d);if(t.length&&_(t),document.cookie=`${c._W}=; path=/; Secure; Max-age=-1; domain=.${window.location.hostname};`,t.includes(e))return!1}const g=(0,o.dq)(c.VM);if(!g.wasError&&g.value){if(h(g.value).includes(e))return!1}return!0}function w(){"undefined"!=typeof document&&document.body.classList.contains("with-similar-games")&&document.body.classList.remove("with-similar-games")}},17238:(e,t,a)=>{a.d(t,{I:()=>u,Z:()=>p});var r=a(63904),i=a.n(r),s=a(87363),n=a.n(s),l=a(78740);const o=i().with("play-similar-games-stub");class c extends s.Component{render(){return n().createElement("div",{className:o()},n().createElement("div",{className:o("block",{text:Boolean(this.props.text),bg:!this.props.text})},this.props.text),n().createElement("div",{className:o("title",{bg:this.props.titleLine})}))}}const m=i().with(l.Ek),u=({inGamePage:e=!1,visible:t=!0})=>n().createElement("div",{className:m({visible:t,"in-game-page":e})},Array.from(Array(e?6:8)).map(((e,t)=>n().createElement(c,{key:t,titleLine:!0}))),n().createElement(c,null)),p=c},53604:(e,t,a)=>{a.d(t,{f:()=>i});var r=a(87363);function i(e){const[t,a]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{"number"==typeof e?setTimeout((()=>{a(!0)}),e):a(!0)}),[e]),t}}}]);
//# sourceMappingURL=https://s3.mdst.yandex.net/games/source-maps/_/build/client/game/desktop/yandex/PlaySimilarGamesManager.component.async.ae540916663627285c72.js.map